import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as n,o as r,c as s,a as e,d as t,e as o,b as d}from"./app-Bw62I61B.js";const c={},l=d('<h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p>redis自2.8.0之后版本提供Keyspace Notifications功能，允许客户订阅Pub / Sub频道，以便以某种方式接收影响Redis数据集事件。</p><h2 id="操作" tabindex="-1"><a class="header-anchor" href="#操作"><span>操作</span></a></h2><h3 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h3><p>修改redis.config配置开启过期通知功能，然后重启redis，修改方法如下 打开注释：notify-keyspace-events “Ex”。( 例如，“Kx”表示想监控某个Key的失效事件。 ) 注释掉：notify-keyspace-events &quot;&quot;</p><h3 id="实现" tabindex="-1"><a class="header-anchor" href="#实现"><span>实现</span></a></h3>',6),p=e("strong",null,"keyevent@0",-1),h={href:"https://www.yuque.com/docs/share/a93bae1b-15fa-4419-90c3-aae33e573daa?view=doc_embed",target:"_blank",rel:"noopener noreferrer"},u=e("h2",{id:"注意",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#注意"},[e("span",null,"注意")])],-1),m=e("p",null,"Redis缓存Key过期通知只能收到的是key，value已经过期无法收到，所以需要在key上标记业务数据。只能通过变相的去实现处理业务数据，比如写入数据的时候写两份，一份作为key存储，一份作为value存储！ 这是不可靠的实现? 首先Redis Pub/Sub 是一种并不可靠地消息机制，他不会做信息的存储，只是在线转发，那么肯定也没有ack确认机制，另外只有订阅段监听时才会转发，所以不是可靠的通知。",-1);function g(y,b){const a=n("ExternalLinkIcon");return r(),s("div",null,[l,e("p",null,[t("事件通过 Redis 的订阅与发布功能（pub/sub）来进行分发, 故需要订阅 "),p,t(":expired 通道0表示db0 根据自己的dbindex选择合适的数字。 "),e("a",h,[t("redis发布订阅"),o(a)])]),u,m])}const k=i(c,[["render",g],["__file","redishuancunguojishijian.html.vue"]]),x=JSON.parse('{"path":"/middleware/yanchiduilie/redishuancunguojishijian.html","title":"redis缓存过期事件","lang":"zh-CN","frontmatter":{"title":"redis缓存过期事件","lang":"zh-CN","date":"2022-07-12T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["middleware"],"tag":["无"],"filename":"redishuancunguojishijian","slug":"bdar8s","docsId":"81512453","description":"介绍 redis自2.8.0之后版本提供Keyspace Notifications功能，允许客户订阅Pub / Sub频道，以便以某种方式接收影响Redis数据集事件。 操作 配置 修改redis.config配置开启过期通知功能，然后重启redis，修改方法如下 打开注释：notify-keyspace-events “Ex”。( 例如，“Kx”表...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/middleware/yanchiduilie/redishuancunguojishijian.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"redis缓存过期事件"}],["meta",{"property":"og:description","content":"介绍 redis自2.8.0之后版本提供Keyspace Notifications功能，允许客户订阅Pub / Sub频道，以便以某种方式接收影响Redis数据集事件。 操作 配置 修改redis.config配置开启过期通知功能，然后重启redis，修改方法如下 打开注释：notify-keyspace-events “Ex”。( 例如，“Kx”表..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-10-19T14:00:28.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2022-07-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-10-19T14:00:28.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"redis缓存过期事件\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-07-12T00:00:00.000Z\\",\\"dateModified\\":\\"2023-10-19T14:00:28.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"操作","slug":"操作","link":"#操作","children":[{"level":3,"title":"配置","slug":"配置","link":"#配置","children":[]},{"level":3,"title":"实现","slug":"实现","link":"#实现","children":[]}]},{"level":2,"title":"注意","slug":"注意","link":"#注意","children":[]}],"git":{"createdTime":1697724028000,"updatedTime":1697724028000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":1.16,"words":347},"filePathRelative":"middleware/yanchiduilie/redishuancunguojishijian.md","localizedDate":"2022年7月12日","excerpt":"<h2>介绍</h2>\\n<p>redis自2.8.0之后版本提供Keyspace Notifications功能，允许客户订阅Pub / Sub频道，以便以某种方式接收影响Redis数据集事件。</p>\\n<h2>操作</h2>\\n<h3>配置</h3>\\n<p>修改redis.config配置开启过期通知功能，然后重启redis，修改方法如下\\n打开注释：notify-keyspace-events  “Ex”。( 例如，“Kx”表示想监控某个Key的失效事件。 )\\n注释掉：notify-keyspace-events  \\"\\"</p>\\n<h3>实现</h3>\\n<p>事件通过 Redis 的订阅与发布功能（pub/sub）来进行分发,\\n故需要订阅 <strong>keyevent@0</strong>:expired 通道0表示db0 根据自己的dbindex选择合适的数字。\\n<a href=\\"https://www.yuque.com/docs/share/a93bae1b-15fa-4419-90c3-aae33e573daa?view=doc_embed\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">redis发布订阅</a></p>","autoDesc":true}');export{k as comp,x as data};

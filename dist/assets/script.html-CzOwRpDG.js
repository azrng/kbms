import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as n,o as l}from"./app-BQsqMNmR.js";const h={};function k(t,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h2 id="审计脚本" tabindex="-1"><a class="header-anchor" href="#审计脚本"><span>审计脚本</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>下面脚本需要替换参数后执行</p></div><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/*</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> 名字：审计触发器</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> 效果：针对表example.user创建一个审计触发器，当该表进行删除更新和插入的时候记录下操作人操作时间以及备份操作</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">*/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> schema</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> audit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--创建备份表</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">drop</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> if</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> exists</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> audit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user_bk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> table</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> audit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.user_bak </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">as</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> select</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">text</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> operation,</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">now</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()::</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">timestamp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> operation_time,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_name,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">::</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> old_content,* </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> example</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--创建备份trigger</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE OR REPLACE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FUNCTION</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> audit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.user_audit()  </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">RETURNS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> TRIGGER </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> $user_bk$</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    IF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (TG_OP </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;DELETE&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">THEN</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        INSERT INTO</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> audit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user_bak</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> TG_OP, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">now</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), user,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,OLD.*;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        RETURN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> OLD;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ELSIF (TG_OP </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;UPDATE&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">THEN</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        INSERT INTO</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> audit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user_bak</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> TG_OP, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">now</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), user,row_to_json(OLD.*),NEW.*;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        RETURN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> NEW;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ELSIF (TG_OP </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;INSERT&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">THEN</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        INSERT INTO</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> audit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user_bak</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> TG_OP, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">now</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), user,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,NEW.*;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        RETURN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> NEW;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    END</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> IF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    RETURN</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 因为这是一个 AFTER 触发器，结果被忽略</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">END</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$user_bk$ </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">LANGUAGE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> plpgsql;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">--表关联触发器 将触发器关联到原始表上</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DROP</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRIGGER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> if</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> exists</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user_audit </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> example</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRIGGER</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> user_audit</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    AFTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> INSERT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> OR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> UPDATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> OR</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DELETE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> example</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    FOR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> EACH </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ROW</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> EXECUTE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PROCEDURE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> audit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">user_audit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据库备份" tabindex="-1"><a class="header-anchor" href="#数据库备份"><span>数据库备份</span></a></h2><h3 id="windows脚本" tabindex="-1"><a class="header-anchor" href="#windows脚本"><span>windows脚本</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">@Title</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  【PostgreSQL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Backup】</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">@echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> off</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setlocal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enableextensions</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> ################################################################</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> ##==============【PostgreSQL Database Backup】==============##</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> ################################################################</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.1、指定PostgreSQL数据库备份方式</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PG_DUMP=D:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\P</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rogram</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Files</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\P</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ostgreSQL</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">6</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">in</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">g_dump.exe</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.2、指定备份文件存放路径</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SAVEPATH=D:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\P</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">rogram</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Files</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\P</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ostgreSQL</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">6</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ata</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\b</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ackup</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.3、配置数据库连接信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DB_NAME=postgres</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DB_HOST=localhost</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DB_PORT=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5432</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DB_USER=postgres</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PGPASSWORD=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">123456</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SCHEMA=lims</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.4、获取当前系统日期YMD=%date:~0,4%%date:~5,2%%date:~8,2%</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> YMD=%date:~0,4%%date:~5,2%%date:~8,2%_0%time:~1,1%%time:~3,2%%time:~6,2%</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.5、指定备份文件名称</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">SET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> FILENAME=%SCHEMA%_%YMD%.dmp</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.6、开始执行数据库备份</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;%PG_DUMP%&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %DB_HOST%</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -U</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %DB_USER%</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %DB_PORT%</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %DB_NAME%</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> %SCHEMA%</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;%SAVEPATH%\\%FILENAME%&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.7、删除指定路径下指定天数之前（以文件的最后修改日期为准）的历史文件。</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.7、指定保存天数</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> DaysAgo=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">forfiles</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;%SAVEPATH%&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /m</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">.dmp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -%DaysAgo%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;cmd /c del /f /q /a @path&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>脚本中PGPASSWORD为固定写法，此种写法执行脚本时，可不提示输入密码；否则，将弹出提示输入密码，无法执行自动备份操作</li><li>PG_DUMP、SAVEPATH、DB_NAME、DB_HOST、DB_PORT、DB_USER、PGPASSWORD、SCHEMA的值根据实际进行设置<br> 命令解释： <ul><li>forfiles 是 Windows 命令提示符（cmd）中的一个命令，用于基于一组文件（包括文件夹）执行命令</li><li>/p 参数后面跟着要搜索的路径（要使用双引号括起来）</li><li>/s 参数表示搜索子目录</li><li>/d -1 表示当前日期之前的日期，因为如果找到的是文件夹，它的日期将与当前日期匹配或早于当前日期。</li><li>/c 参数后面是要执行的命令，这里是<code> cmd /c del /f /q /a @path</code></li></ul></li></ul><p>参考自：<a href="https://blog.csdn.net/qq_39487225/article/details/144590352" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_39487225/article/details/144590352</a></p>`,8)]))}const d=i(h,[["render",k],["__file","script.html.vue"]]),r=JSON.parse(`{"path":"/dataBase/postgresql/script.html","title":"脚本","lang":"zh-CN","frontmatter":{"title":"脚本","lang":"zh-CN","date":"2025-01-12T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dataBase","pgsql"],"tag":["脚本"],"description":"审计脚本 提示 下面脚本需要替换参数后执行 数据库备份 windows脚本 脚本中PGPASSWORD为固定写法，此种写法执行脚本时，可不提示输入密码；否则，将弹出提示输入密码，无法执行自动备份操作 PG_DUMP、SAVEPATH、DB_NAME、DB_HOST、DB_PORT、DB_USER、PGPASSWORD、SCHEMA的值根据实际进行设置 ...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dataBase/postgresql/script.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"脚本"}],["meta",{"property":"og:description","content":"审计脚本 提示 下面脚本需要替换参数后执行 数据库备份 windows脚本 脚本中PGPASSWORD为固定写法，此种写法执行脚本时，可不提示输入密码；否则，将弹出提示输入密码，无法执行自动备份操作 PG_DUMP、SAVEPATH、DB_NAME、DB_HOST、DB_PORT、DB_USER、PGPASSWORD、SCHEMA的值根据实际进行设置 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-12T15:25:18.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"脚本"}],["meta",{"property":"article:published_time","content":"2025-01-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-12T15:25:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"脚本\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-01-12T00:00:00.000Z\\",\\"dateModified\\":\\"2025-01-12T15:25:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"审计脚本","slug":"审计脚本","link":"#审计脚本","children":[]},{"level":2,"title":"数据库备份","slug":"数据库备份","link":"#数据库备份","children":[{"level":3,"title":"windows脚本","slug":"windows脚本","link":"#windows脚本","children":[]}]}],"git":{"createdTime":1736695518000,"updatedTime":1736695518000,"contributors":[{"name":"azrng","username":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":2.27,"words":680},"filePathRelative":"dataBase/postgresql/script.md","localizedDate":"2025年1月12日","excerpt":"<h2>审计脚本</h2>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>下面脚本需要替换参数后执行</p>\\n</div>\\n<div class=\\"language-sql line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"sql\\" data-title=\\"sql\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">/*</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"> 名字：审计触发器</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\"> 效果：针对表example.user创建一个审计触发器，当该表进行删除更新和插入的时候记录下操作人操作时间以及备份操作</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">*/</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">create</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> schema</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\"> audit</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">--创建备份表</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">drop</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> table</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> if</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> exists</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> audit</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">user_bk</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">create</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> table</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\"> audit</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.user_bak </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">as</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> select</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> ''</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">::</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">text</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> as</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> operation,</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">now</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">()::</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">timestamp</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> operation_time,</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">''</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">::</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">text</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> user_name,</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">''</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">::</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">text</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> old_content,* </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">from</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> example</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">user</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">--创建备份trigger</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">CREATE OR REPLACE</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> FUNCTION</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\"> audit</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.user_audit()  </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">RETURNS</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> TRIGGER </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">AS</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> $user_bk$</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">BEGIN</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">    IF</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> (TG_OP </span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 'DELETE'</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">) </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">THEN</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">        INSERT INTO</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> audit</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">user_bak</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> SELECT</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> TG_OP, </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">now</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">(), user,</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">''</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">,OLD.*;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">        RETURN</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> OLD;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">    ELSIF (TG_OP </span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 'UPDATE'</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">) </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">THEN</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">        INSERT INTO</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> audit</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">user_bak</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> SELECT</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> TG_OP, </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">now</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">(), user,row_to_json(OLD.*),NEW.*;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">        RETURN</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> NEW;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">    ELSIF (TG_OP </span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> 'INSERT'</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">) </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">THEN</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">        INSERT INTO</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> audit</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">user_bak</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> SELECT</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> TG_OP, </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">now</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">(), user,</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\">''</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">,NEW.*;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">        RETURN</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> NEW;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">    END</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> IF</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">    RETURN</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> NULL</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">; </span><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">-- 因为这是一个 AFTER 触发器，结果被忽略</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">END</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">$user_bk$ </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">LANGUAGE</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> plpgsql;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic\\">--表关联触发器 将触发器关联到原始表上</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">DROP</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> TRIGGER</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> if</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> exists</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> user_audit </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">on</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> example</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">user</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">CREATE</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> TRIGGER</span><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\"> user_audit</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">    AFTER</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> INSERT</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> OR</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> UPDATE</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> OR</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> DELETE</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> ON</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> example</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">user</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">    FOR</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> EACH </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">ROW</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> EXECUTE</span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\"> PROCEDURE</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> audit</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\">user_audit</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">();</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{d as comp,r as data};

import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as s,d as e}from"./app-D8HBJYTp.js";const t={},p=e(`<h2 id="创建配置文件" tabindex="-1"><a class="header-anchor" href="#创建配置文件"><span>创建配置文件</span></a></h2><p>创建配置文件redis-master-deployment.yaml</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1 
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>master
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
      <span class="token key atrule">role</span><span class="token punctuation">:</span> master
      <span class="token key atrule">tier</span><span class="token punctuation">:</span> backend
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
        <span class="token key atrule">role</span><span class="token punctuation">:</span> master
        <span class="token key atrule">tier</span><span class="token punctuation">:</span> backend
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> master
        <span class="token key atrule">image</span><span class="token punctuation">:</span> kubeguide/redis<span class="token punctuation">-</span>master
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">6379</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建服务文件：redis-master-service.yaml</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>master
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">role</span><span class="token punctuation">:</span> master
    <span class="token key atrule">tier</span><span class="token punctuation">:</span> backend
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">6379</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">role</span><span class="token punctuation">:</span> master
    <span class="token key atrule">tier</span><span class="token punctuation">:</span> backend
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="执行" tabindex="-1"><a class="header-anchor" href="#执行"><span>执行</span></a></h2><p>执行命令更新k3s</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> kubectl apply <span class="token parameter variable">-f</span> ./config/redis/redis-master-deployment.yaml
<span class="token function">sudo</span> kubectl apply <span class="token parameter variable">-f</span> ./config/redis/redis-master-service.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后获取当前的容器信息(pods)</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> kubectl get pods

NAME                          READY   STATUS    RESTARTS   AGE
redis-master-7fc8b5fb-gxdxl   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          46s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),l=[p];function c(i,o){return a(),s("div",null,l)}const d=n(t,[["render",c],["__file","redisInstall.html.vue"]]),k=JSON.parse('{"path":"/cloud/k3s/operators/redisInstall.html","title":"Redis部署","lang":"zh-CN","frontmatter":{"title":"Redis部署","lang":"zh-CN","date":"2023-12-30T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["cloud"],"tag":["redis","k3s"],"description":"创建配置文件 创建配置文件redis-master-deployment.yaml 创建服务文件：redis-master-service.yaml 执行 执行命令更新k3s 然后获取当前的容器信息(pods)","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/cloud/k3s/operators/redisInstall.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"Redis部署"}],["meta",{"property":"og:description","content":"创建配置文件 创建配置文件redis-master-deployment.yaml 创建服务文件：redis-master-service.yaml 执行 执行命令更新k3s 然后获取当前的容器信息(pods)"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-12-30T15:53:06.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"redis"}],["meta",{"property":"article:tag","content":"k3s"}],["meta",{"property":"article:published_time","content":"2023-12-30T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-12-30T15:53:06.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Redis部署\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-12-30T00:00:00.000Z\\",\\"dateModified\\":\\"2023-12-30T15:53:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"创建配置文件","slug":"创建配置文件","link":"#创建配置文件","children":[]},{"level":2,"title":"执行","slug":"执行","link":"#执行","children":[]}],"git":{"createdTime":1703947377000,"updatedTime":1703951586000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":2}]},"readingTime":{"minutes":0.58,"words":173},"filePathRelative":"cloud/k3s/operators/redisInstall.md","localizedDate":"2023年12月30日","excerpt":"<h2>创建配置文件</h2>\\n<p>创建配置文件redis-master-deployment.yaml</p>\\n<div class=\\"language-yaml\\" data-ext=\\"yml\\" data-title=\\"yml\\"><pre class=\\"language-yaml\\"><code><span class=\\"token key atrule\\">apiVersion</span><span class=\\"token punctuation\\">:</span> apps/v1 \\n<span class=\\"token key atrule\\">kind</span><span class=\\"token punctuation\\">:</span> Deployment\\n<span class=\\"token key atrule\\">metadata</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> redis<span class=\\"token punctuation\\">-</span>master\\n  <span class=\\"token key atrule\\">labels</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">app</span><span class=\\"token punctuation\\">:</span> redis\\n<span class=\\"token key atrule\\">spec</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">selector</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">matchLabels</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">app</span><span class=\\"token punctuation\\">:</span> redis\\n      <span class=\\"token key atrule\\">role</span><span class=\\"token punctuation\\">:</span> master\\n      <span class=\\"token key atrule\\">tier</span><span class=\\"token punctuation\\">:</span> backend\\n  <span class=\\"token key atrule\\">replicas</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">1</span>\\n  <span class=\\"token key atrule\\">template</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">metadata</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">labels</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">app</span><span class=\\"token punctuation\\">:</span> redis\\n        <span class=\\"token key atrule\\">role</span><span class=\\"token punctuation\\">:</span> master\\n        <span class=\\"token key atrule\\">tier</span><span class=\\"token punctuation\\">:</span> backend\\n    <span class=\\"token key atrule\\">spec</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">containers</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">name</span><span class=\\"token punctuation\\">:</span> master\\n        <span class=\\"token key atrule\\">image</span><span class=\\"token punctuation\\">:</span> kubeguide/redis<span class=\\"token punctuation\\">-</span>master\\n        <span class=\\"token key atrule\\">imagePullPolicy</span><span class=\\"token punctuation\\">:</span> IfNotPresent\\n        <span class=\\"token key atrule\\">ports</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token punctuation\\">-</span> <span class=\\"token key atrule\\">containerPort</span><span class=\\"token punctuation\\">:</span> <span class=\\"token number\\">6379</span>\\n</code></pre></div>","autoDesc":true}');export{d as comp,k as data};

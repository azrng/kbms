import{_ as r}from"./1611106025062-d5831aff-0228-44e2-9aed-c3b235645694-Cy4xoVtT.js";import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as t,c,a as e,d as n,e as s,b as i}from"./app-qB9_Bjjp.js";const d="/kbms/common/1624728935117-883b7798-4fd2-4cba-a59e-b5f93d5eb672.png",p="/kbms/common/1624729238683-fc4516b1-404a-46a0-b343-3d624120e091.png",k={},m=i(`<blockquote><p>该方法部署的jenkins里面不包含netcore环境，下面包含通过docker部署netcore步骤</p></blockquote><h2 id="_1-部署jenkins" tabindex="-1"><a class="header-anchor" href="#_1-部署jenkins"><span>1. 部署jenkins</span></a></h2><h3 id="_1-1-创建jenkins的工作目录" tabindex="-1"><a class="header-anchor" href="#_1-1-创建jenkins的工作目录"><span>1.1 创建jenkins的工作目录</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>//创建工作目录 
<span class="token function">mkdir</span> /var/jenkins_home

//赋予权限 
<span class="token function">chown</span> <span class="token parameter variable">-R</span> <span class="token number">1000</span> /var/jenkins_home
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-通过docker部署-方案一" tabindex="-1"><a class="header-anchor" href="#_1-2-通过docker部署-方案一"><span>1.2 通过docker部署(方案一)</span></a></h3><h4 id="_1-2-1-拉取镜像" tabindex="-1"><a class="header-anchor" href="#_1-2-1-拉取镜像"><span>1.2.1 拉取镜像</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull  jenkinsci/blueocean
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_1-2-2-生成容器" tabindex="-1"><a class="header-anchor" href="#_1-2-2-生成容器"><span>1.2.2 生成容器</span></a></h4><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#注意：切换一行执行命令 </span>
<span class="token function">docker</span> run <span class="token parameter variable">-u</span> root <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">9003</span>:8080 <span class="token parameter variable">-p</span> <span class="token number">50000</span>:50000 
 <span class="token parameter variable">-v</span> /var/jenkins_home:/var/jenkins_home 
 <span class="token parameter variable">-v</span> /usr/bin/docker:/usr/bin/docker  
 <span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock  
 <span class="token parameter variable">-v</span> /usr/local/bin/docker-compose:/usr/local/bin/docker-compose 
 jenkinsci/blueocean 
 
 一行显示:
<span class="token function">docker</span> run <span class="token parameter variable">-u</span> root <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">9003</span>:8080 <span class="token parameter variable">-p</span> <span class="token number">50000</span>:50000 <span class="token parameter variable">-v</span> /var/jenkins_home:/var/jenkins_home  <span class="token parameter variable">-v</span> /usr/bin/docker:/usr/bin/docker   <span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock   <span class="token parameter variable">-v</span> /usr/local/bin/docker-compose:/usr/local/bin/docker-compose  jenkinsci/blueocean
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-通过docker-compose部署-方案二" tabindex="-1"><a class="header-anchor" href="#_1-3-通过docker-compose部署-方案二"><span>1.3 通过docker-compose部署(方案二)</span></a></h3><p>执行docker-compose脚本</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>version: <span class="token string">&#39;3.4&#39;</span>

services:
  jenkins:
    container_name: jenkins
    image: jenkinsci/blueocean
    ports:
      - <span class="token string">&quot;9003:8080&quot;</span>
      - <span class="token string">&quot;50000:50000&quot;</span>
    restart: always
    user: root
    volumes:
      - <span class="token string">&#39;/var/jenkins_home:/var/jenkins_home&#39;</span>
      - <span class="token string">&#39;/usr/bin/docker:/usr/bin/docker&#39;</span>
      - <span class="token string">&#39;/var/run/docker.sock:/var/run/docker.sock&#39;</span>
      - <span class="token string">&#39;/usr/local/bin/docker-compose:/usr/local/bin/docker-compose&#39;</span>
    environment:
      - <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-1-执行命令生成容器" tabindex="-1"><a class="header-anchor" href="#_1-3-1-执行命令生成容器"><span>1.3.1 执行命令生成容器</span></a></h4><blockquote><p>docker-compose -f docker-compose.yaml  up --build -d jenkins</p></blockquote><h2 id="_2-访问jenkins网站" tabindex="-1"><a class="header-anchor" href="#_2-访问jenkins网站"><span>2. 访问jenkins网站</span></a></h2>`,15),v={href:"http://192.168.1.14:8080/",target:"_blank",rel:"noopener noreferrer"},h=e("img",{src:r,alt:"image.png",loading:"lazy"},null,-1),u=i(`<h3 id="_2-1-寻找超级管理员密码" tabindex="-1"><a class="header-anchor" href="#_2-1-寻找超级管理员密码"><span>2.1 寻找超级管理员密码</span></a></h3><p>进入容器，然后去容器的执行目录下查找管理员的密码</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token comment">// 进入容器 </span>
docker exec <span class="token operator">-</span>it 容器ID bash 
<span class="token comment">// 查看密码 </span>
cat <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>jenkins_home<span class="token operator">/</span>secrets<span class="token operator">/</span>initialAdminPassword

或者不进入容器
docker exec 容器ID  cat <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>jenkins_home<span class="token operator">/</span>secrets<span class="token operator">/</span>initialAdminPassword
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+d+'" alt="image.png" loading="lazy"> 输入找到的管理员密码然后进入系统</p><h3 id="_2-2-进入jenkins" tabindex="-1"><a class="header-anchor" href="#_2-2-进入jenkins"><span>2.2 进入jenkins</span></a></h3><p>新手入门，选择安装插件的方式，这里我们直接选择安装推荐的插件然后进入系统 注意：安装插件报错的话继续在执行一遍。</p><h3 id="_2-3-设置管理员用户密码" tabindex="-1"><a class="header-anchor" href="#_2-3-设置管理员用户密码"><span>2.3 设置管理员用户密码</span></a></h3><p>创建管理员用户密码 <img src="'+p+`" alt="image.png" loading="lazy"></p><h3 id="_2-4-系统界面" tabindex="-1"><a class="header-anchor" href="#_2-4-系统界面"><span>2.4 系统界面</span></a></h3><p>如果系统管理里面有错误，那么我们可以手动安装和修改。</p><h3 id="_2-5-修改镜像源" tabindex="-1"><a class="header-anchor" href="#_2-5-修改镜像源"><span>2.5 修改镜像源</span></a></h3><p>插件管理-&gt;高级-&gt;升级站点，修改为清华大学插件源</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 清华大学官方镜像</span>
https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-错误" tabindex="-1"><a class="header-anchor" href="#_3-错误"><span>3 错误</span></a></h2><p>如果出现错误，那么就需要去查看控制台输出，根据错误找原因。</p><h4 id="_3-1-ipv4-forwarding-is-disabled" tabindex="-1"><a class="header-anchor" href="#_3-1-ipv4-forwarding-is-disabled"><span>3.1 IPv4 forwarding is disabled</span></a></h4><p>意思就是linux没有开启 Ipv4 数据包转发功能 可以先尝试重启docker，如果没有作用可以修改下面配置</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">## 1. 打开 sysctl.conf</span>
<span class="token function">vim</span> /etc/sysctl.conf

<span class="token comment">## 2.添加下面一行</span>
<span class="token assign-left variable">net.ipv4.ip_forward</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token comment">## 3.重启 network 和 docker</span>
systemctl restart network <span class="token operator">&amp;&amp;</span> systemctl restart <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-参考文档" tabindex="-1"><a class="header-anchor" href="#_4-参考文档"><span>4 参考文档</span></a></h2>`,19),b={href:"https://www.jenkins.io/doc/book/installing/docker/",target:"_blank",rel:"noopener noreferrer"},g={href:"https://www.cnblogs.com/xiaoxiaotank/p/14762665.html",target:"_blank",rel:"noopener noreferrer"};function _(f,j){const a=o("ExternalLinkIcon");return t(),c("div",null,[m,e("p",null,[n("访问地址："),e("a",v,[n("http://IP:8080"),s(a)]),h]),u,e("blockquote",null,[e("p",null,[n("官方文档："),e("a",b,[n("https://www.jenkins.io/doc/book/installing/docker/"),s(a)]),n(" xiaoxiaotank："),e("a",g,[n("https://www.cnblogs.com/xiaoxiaotank/p/14762665.html"),s(a)])])])])}const z=l(k,[["render",_],["__file","dockerInstall.html.vue"]]),I=JSON.parse('{"path":"/cloud/ciAndCd/jenkins/install/dockerInstall.html","title":"docker安装jenkins","lang":"zh-CN","frontmatter":{"title":"docker安装jenkins","lang":"zh-CN","date":"2023-05-19T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["cloud"],"tag":["无"],"filename":"dockerInstall","slug":"pl3xwg","docsId":"30401020","description":"该方法部署的jenkins里面不包含netcore环境，下面包含通过docker部署netcore步骤 1. 部署jenkins 1.1 创建jenkins的工作目录 1.2 通过docker部署(方案一) 1.2.1 拉取镜像 1.2.2 生成容器 1.3 通过docker-compose部署(方案二) 执行docker-compose脚本 1.3....","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/cloud/ciAndCd/jenkins/install/dockerInstall.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"docker安装jenkins"}],["meta",{"property":"og:description","content":"该方法部署的jenkins里面不包含netcore环境，下面包含通过docker部署netcore步骤 1. 部署jenkins 1.1 创建jenkins的工作目录 1.2 通过docker部署(方案一) 1.2.1 拉取镜像 1.2.2 生成容器 1.3 通过docker-compose部署(方案二) 执行docker-compose脚本 1.3...."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1611106025062-d5831aff-0228-44e2-9aed-c3b235645694.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-09-24T08:50:00.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2023-05-19T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-09-24T08:50:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"docker安装jenkins\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1611106025062-d5831aff-0228-44e2-9aed-c3b235645694.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1624728935117-883b7798-4fd2-4cba-a59e-b5f93d5eb672.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1624729238683-fc4516b1-404a-46a0-b343-3d624120e091.png\\"],\\"datePublished\\":\\"2023-05-19T00:00:00.000Z\\",\\"dateModified\\":\\"2023-09-24T08:50:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"1. 部署jenkins","slug":"_1-部署jenkins","link":"#_1-部署jenkins","children":[{"level":3,"title":"1.1 创建jenkins的工作目录","slug":"_1-1-创建jenkins的工作目录","link":"#_1-1-创建jenkins的工作目录","children":[]},{"level":3,"title":"1.2 通过docker部署(方案一)","slug":"_1-2-通过docker部署-方案一","link":"#_1-2-通过docker部署-方案一","children":[{"level":4,"title":"1.2.1 拉取镜像","slug":"_1-2-1-拉取镜像","link":"#_1-2-1-拉取镜像","children":[]},{"level":4,"title":"1.2.2 生成容器","slug":"_1-2-2-生成容器","link":"#_1-2-2-生成容器","children":[]}]},{"level":3,"title":"1.3 通过docker-compose部署(方案二)","slug":"_1-3-通过docker-compose部署-方案二","link":"#_1-3-通过docker-compose部署-方案二","children":[{"level":4,"title":"1.3.1 执行命令生成容器","slug":"_1-3-1-执行命令生成容器","link":"#_1-3-1-执行命令生成容器","children":[]}]}]},{"level":2,"title":"2. 访问jenkins网站","slug":"_2-访问jenkins网站","link":"#_2-访问jenkins网站","children":[{"level":3,"title":"2.1 寻找超级管理员密码","slug":"_2-1-寻找超级管理员密码","link":"#_2-1-寻找超级管理员密码","children":[]},{"level":3,"title":"2.2 进入jenkins","slug":"_2-2-进入jenkins","link":"#_2-2-进入jenkins","children":[]},{"level":3,"title":"2.3 设置管理员用户密码","slug":"_2-3-设置管理员用户密码","link":"#_2-3-设置管理员用户密码","children":[]},{"level":3,"title":"2.4 系统界面","slug":"_2-4-系统界面","link":"#_2-4-系统界面","children":[]},{"level":3,"title":"2.5 修改镜像源","slug":"_2-5-修改镜像源","link":"#_2-5-修改镜像源","children":[]}]},{"level":2,"title":"3 错误","slug":"_3-错误","link":"#_3-错误","children":[{"level":4,"title":"3.1 IPv4 forwarding is disabled","slug":"_3-1-ipv4-forwarding-is-disabled","link":"#_3-1-ipv4-forwarding-is-disabled","children":[]}]},{"level":2,"title":"4 参考文档","slug":"_4-参考文档","link":"#_4-参考文档","children":[]}],"git":{"createdTime":1679666088000,"updatedTime":1695545400000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":2.08,"words":623},"filePathRelative":"cloud/ciAndCd/jenkins/install/dockerInstall.md","localizedDate":"2023年5月19日","excerpt":"<blockquote>\\n<p>该方法部署的jenkins里面不包含netcore环境，下面包含通过docker部署netcore步骤</p>\\n</blockquote>\\n<h2>1. 部署jenkins</h2>\\n<h3>1.1 创建jenkins的工作目录</h3>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code>//创建工作目录 \\n<span class=\\"token function\\">mkdir</span> /var/jenkins_home\\n\\n//赋予权限 \\n<span class=\\"token function\\">chown</span> <span class=\\"token parameter variable\\">-R</span> <span class=\\"token number\\">1000</span> /var/jenkins_home\\n</code></pre></div>","autoDesc":true}');export{z as comp,I as data};

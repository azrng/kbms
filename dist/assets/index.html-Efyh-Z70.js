import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r,o as l,c as i,a as e,b as n,d as a,e as o}from"./app-vSdX8vi3.js";const p={},c=e("h2",{id:"平台",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#平台"},[e("span",null,"平台")])],-1),d={href:"http://www.loongnix.cn/zh/api/dotnet/",target:"_blank",rel:"noopener noreferrer"},h=o('<h2 id="部署模式选择" tabindex="-1"><a class="header-anchor" href="#部署模式选择"><span>部署模式选择</span></a></h2><p>ASP.NetCore目前的部署方式分为三种，独立发布（SCD）、框架依赖（FDD）、依赖框架的可执行文件（FDE）。其中FDD和FDE差别不大，不予讨论</p><h3 id="独立部署" tabindex="-1"><a class="header-anchor" href="#独立部署"><span>独立部署</span></a></h3><p>不依赖目标系统上存在的共享组件。所有的组件（netcore库和netcore运行时）都包含在应用程序中，并且独立于其他netcore应用程序。</p><h3 id="框架依赖" tabindex="-1"><a class="header-anchor" href="#框架依赖"><span>框架依赖</span></a></h3><p>依赖目标系统上存在共享系统版本的netcore。</p><h3 id="选择哪种部署方式" tabindex="-1"><a class="header-anchor" href="#选择哪种部署方式"><span>选择哪种部署方式</span></a></h3><p>简单的说框架依赖和独立发布的区别就是装不装 .Net core运行时的区别。装上运行时之后，很多<code>.net core</code>的库都能共用，否则就需要另外打包进去，所以独立发布的程序体积会比框架依赖大得多。本人以<code>asp.net core</code>默认样板应用实测，独立发布的大小约为100M，框架依赖的大小约为5M。 独立发布的话不需要安装<code>.net core</code>的运行时，而框架依赖则需要安装<code>.net core</code> 运行时或者直接安装SDK。</p><h2 id="cli发布" tabindex="-1"><a class="header-anchor" href="#cli发布"><span>CLI发布</span></a></h2>',9),u={href:"https://learn.microsoft.com/zh-cn/dotnet/core/deploying/deploy-with-cli",target:"_blank",rel:"noopener noreferrer"},m=o(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 剪裁</span>
dotnet publish <span class="token parameter variable">-c</span> Release <span class="token parameter variable">-r</span> win-x64 /p:PublishSingleFile<span class="token operator">=</span>true /p:PublishTrimmed<span class="token operator">=</span>true /p:PublishReadyToRun<span class="token operator">=</span>true /p:PublishReadyToRunShowWarnings<span class="token operator">=</span>true /p:UseAppHost<span class="token operator">=</span>true  /p:IncludeNativeLibrariesForSelfExtract<span class="token operator">=</span>true /p:SelfContained<span class="token operator">=</span>true --self-contained <span class="token boolean">true</span>

<span class="token comment"># 禁用剪裁</span>
dotnet publish <span class="token parameter variable">-c</span> Release <span class="token parameter variable">-r</span> win-x64  /p:PublishSingleFile<span class="token operator">=</span>true /p:PublishTrimmed<span class="token operator">=</span>false /p:PublishReadyToRun<span class="token operator">=</span>true /p:IncludeNativeLibrariesForSelfExtract<span class="token operator">=</span>true --self-contained <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中，<code>-r</code> 参数表示发布目标平台，<code>win-x64</code> 代表 Windows 64 位。你可以根据需要替换为其他平台。 dotnet publish：这是用于执行发布操作的 .NET CLI 命令。</p>`,2),b=o("<li><code>dotnet publish</code>：这是用于执行发布操作的 .NET CLI 命令。</li><li><code>-c Release</code>：指定发布的配置为 Release 模式，这将优化应用程序的性能和大小。</li><li><code>-r win-x64</code>：指定目标运行时为 Windows x64 平台，发布输出将为该平台准备。</li><li><code>/p:PublishSingleFile=true</code>：设置发布输出为单个可执行文件，将应用程序和其依赖项打包为一个文件。</li><li><code>/p:PublishTrimmed=true</code>：启用发布优化，删除未使用的依赖项和代码来减小应用程序的大小。</li><li><code>/p:PublishReadyToRun=true</code>：使用 ReadyToRun 编译器进行发布，可以提高应用程序的启动性能。</li><li><code>/p:PublishReadyToRunShowWarnings=true</code>：在使用 ReadyToRun 编译器进行发布时显示警告信息。</li><li><code>/p:IncludeNativeLibrariesForSelfExtract=true</code>：包含本机库以支持自解压功能，以便在运行时自动提取依赖项。</li>",8),g=e("code",null,"/p:UseAppHost=true",-1),k={href:"https://learn.microsoft.com/zh-cn/dotnet/core/deploying/deploy-with-cli#framework-dependent-deployment",target:"_blank",rel:"noopener noreferrer"},_=e("h3",{id:"裁剪部署",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#裁剪部署"},[e("span",null,"裁剪部署")])],-1),v={href:"https://learn.microsoft.com/zh-cn/dotnet/core/deploying/trimming/trim-self-contained",target:"_blank",rel:"noopener noreferrer"},f=o(`<p>CLI发布命令，以下示例将 Windows 应用发布为经过剪裁的独立应用程序</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>dotnet publish <span class="token operator">-</span>r win<span class="token operator">-</span>x64 <span class="token operator">-</span>c Release

dotnet publish <span class="token operator">-</span>r win<span class="token operator">-</span>x64 <span class="token operator">-</span>c Release <span class="token operator">-</span>p<span class="token punctuation">:</span>PublishTrimmed<span class="token operator">=</span><span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="资料" tabindex="-1"><a class="header-anchor" href="#资料"><span>资料</span></a></h2>`,3),x={href:"https://mp.weixin.qq.com/s/uZU0vUSmKAplUa23GkOAlQ",target:"_blank",rel:"noopener noreferrer"};function w(y,D){const t=r("ExternalLinkIcon");return l(),i("div",null,[c,e("p",null,[n("龙芯支持："),e("a",d,[n("http://www.loongnix.cn/zh/api/dotnet/"),a(t)])]),h,e("p",null,[n("资料："),e("a",u,[n("https://learn.microsoft.com/zh-cn/dotnet/core/deploying/deploy-with-cli"),a(t)])]),m,e("ul",null,[b,e("li",null,[g,n(":false为依赖框架部署，详细看"),e("a",k,[n("此处"),a(t)])])]),_,e("p",null,[n("部署说明："),e("a",v,[n("地址"),a(t)])]),f,e("p",null,[n("揭秘.NET Core剪裁器背后的技术："),e("a",x,[n("https://mp.weixin.qq.com/s/uZU0vUSmKAplUa23GkOAlQ"),a(t)])])])}const F=s(p,[["render",w],["__file","index.html.vue"]]),S=JSON.parse('{"path":"/dotnet/buildAndRelease/","title":"概述","lang":"zh-CN","frontmatter":{"title":"概述","lang":"zh-CN","date":"2023-03-29T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dotNET"],"tag":["无"],"filename":"gaishu","slug":"dv5d9ovoiqaoceea","docsId":"111753464","description":"平台 龙芯支持：http://www.loongnix.cn/zh/api/dotnet/ 部署模式选择 ASP.NetCore目前的部署方式分为三种，独立发布（SCD）、框架依赖（FDD）、依赖框架的可执行文件（FDE）。其中FDD和FDE差别不大，不予讨论 独立部署 不依赖目标系统上存在的共享组件。所有的组件（netcore库和netcore运行时...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dotnet/buildAndRelease/"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"概述"}],["meta",{"property":"og:description","content":"平台 龙芯支持：http://www.loongnix.cn/zh/api/dotnet/ 部署模式选择 ASP.NetCore目前的部署方式分为三种，独立发布（SCD）、框架依赖（FDD）、依赖框架的可执行文件（FDE）。其中FDD和FDE差别不大，不予讨论 独立部署 不依赖目标系统上存在的共享组件。所有的组件（netcore库和netcore运行时..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-01-09T15:37:11.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2023-03-29T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-01-09T15:37:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"概述\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-03-29T00:00:00.000Z\\",\\"dateModified\\":\\"2024-01-09T15:37:11.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"平台","slug":"平台","link":"#平台","children":[]},{"level":2,"title":"部署模式选择","slug":"部署模式选择","link":"#部署模式选择","children":[{"level":3,"title":"独立部署","slug":"独立部署","link":"#独立部署","children":[]},{"level":3,"title":"框架依赖","slug":"框架依赖","link":"#框架依赖","children":[]},{"level":3,"title":"选择哪种部署方式","slug":"选择哪种部署方式","link":"#选择哪种部署方式","children":[]}]},{"level":2,"title":"CLI发布","slug":"cli发布","link":"#cli发布","children":[{"level":3,"title":"裁剪部署","slug":"裁剪部署","link":"#裁剪部署","children":[]}]},{"level":2,"title":"资料","slug":"资料","link":"#资料","children":[]}],"git":{"createdTime":1704813924000,"updatedTime":1704814631000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":2}]},"readingTime":{"minutes":2.52,"words":757},"filePathRelative":"dotnet/buildAndRelease/readme.md","localizedDate":"2023年3月29日","excerpt":"<h2>平台</h2>\\n<p>龙芯支持：<a href=\\"http://www.loongnix.cn/zh/api/dotnet/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">http://www.loongnix.cn/zh/api/dotnet/</a></p>\\n<h2>部署模式选择</h2>\\n<p>ASP.NetCore目前的部署方式分为三种，独立发布（SCD）、框架依赖（FDD）、依赖框架的可执行文件（FDE）。其中FDD和FDE差别不大，不予讨论</p>\\n<h3>独立部署</h3>\\n<p>不依赖目标系统上存在的共享组件。所有的组件（netcore库和netcore运行时）都包含在应用程序中，并且独立于其他netcore应用程序。</p>","autoDesc":true}');export{F as comp,S as data};

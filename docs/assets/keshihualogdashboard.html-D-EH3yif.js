import{_ as c}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as i,c as l,a as n,d as a,e as s,b as p}from"./app-DMmdIwn0.js";const u="/kbms/common/1618728496588-3edb734c-2f97-4b1a-a862-debdf836f1b8.png",r="/kbms/common/1618728549145-37e03444-0103-4f04-917a-3d153ae07731.png",d={},k=n("h2",{id:"介绍",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#介绍"},[n("span",null,"介绍")])],-1),g=n("p",null,[n("code",null,"LogDashboard"),a("是在github上开源的aspnetcore项目, 它旨在帮助开发人员排查项目运行中出现错误时快速查看日志排查问题。")],-1),m={href:"https://doc.logdashboard.net/",target:"_blank",rel:"noopener noreferrer"},h={href:"https://github.com/realLiangshiwei/LogDashboard",target:"_blank",rel:"noopener noreferrer"},b=p('<p>支持的日志组件：nlog、log4net、serilog 支持的数据源：txt、数据库</p><h2 id="简单使用" tabindex="-1"><a class="header-anchor" href="#简单使用"><span>简单使用</span></a></h2><p>这里使用serilog做日志组件，数据源使用txt，认证访问使用简单的固定账号密码</p><h3 id="程序" tabindex="-1"><a class="header-anchor" href="#程序"><span>程序</span></a></h3><p>本次事例使用的是ASP.NET Core Web API程序框架，版本是.net5</p><h3 id="安装组件" tabindex="-1"><a class="header-anchor" href="#安装组件"><span>安装组件</span></a></h3>',6),v=p(`<h3 id="配置日志" tabindex="-1"><a class="header-anchor" href="#配置日志"><span>配置日志</span></a></h3><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Program</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">string</span></span> logOutputTemplate <span class="token operator">=</span> <span class="token string">&quot;{Timestamp:HH:mm:ss.fff zzz} || {Level} || {SourceContext:l} || {Message} || {Exception} ||end {NewLine}&quot;</span><span class="token punctuation">;</span>
            Log<span class="token punctuation">.</span>Logger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LoggerConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span>MinimumLevel<span class="token punctuation">.</span><span class="token function">Debug</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span>MinimumLevel<span class="token punctuation">.</span><span class="token function">Override</span><span class="token punctuation">(</span><span class="token string">&quot;Default&quot;</span><span class="token punctuation">,</span> LogEventLevel<span class="token punctuation">.</span>Information<span class="token punctuation">)</span>
              <span class="token punctuation">.</span>MinimumLevel<span class="token punctuation">.</span><span class="token function">Override</span><span class="token punctuation">(</span><span class="token string">&quot;Microsoft&quot;</span><span class="token punctuation">,</span> LogEventLevel<span class="token punctuation">.</span>Error<span class="token punctuation">)</span>
              <span class="token punctuation">.</span>MinimumLevel<span class="token punctuation">.</span><span class="token function">Override</span><span class="token punctuation">(</span><span class="token string">&quot;Microsoft.Hosting.Lifetime&quot;</span><span class="token punctuation">,</span> LogEventLevel<span class="token punctuation">.</span>Information<span class="token punctuation">)</span>
              <span class="token punctuation">.</span>Enrich<span class="token punctuation">.</span><span class="token function">FromLogContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span>WriteTo<span class="token punctuation">.</span><span class="token function">Console</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">theme</span><span class="token punctuation">:</span> Serilog<span class="token punctuation">.</span>Sinks<span class="token punctuation">.</span>SystemConsole<span class="token punctuation">.</span>Themes<span class="token punctuation">.</span>AnsiConsoleTheme<span class="token punctuation">.</span>Code<span class="token punctuation">)</span>
              <span class="token punctuation">.</span>WriteTo<span class="token punctuation">.</span><span class="token function">File</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">AppContext<span class="token punctuation">.</span>BaseDirectory</span><span class="token punctuation">}</span></span><span class="token string">Logs/netcore.log&quot;</span></span><span class="token punctuation">,</span> <span class="token named-parameter punctuation">rollingInterval</span><span class="token punctuation">:</span> RollingInterval<span class="token punctuation">.</span>Day<span class="token punctuation">,</span> <span class="token named-parameter punctuation">outputTemplate</span><span class="token punctuation">:</span> logOutputTemplate<span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">CreateLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">CreateHostBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IHostBuilder</span> <span class="token function">CreateHostBuilder</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
            Host<span class="token punctuation">.</span><span class="token function">CreateDefaultBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">UseSerilog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">ConfigureWebHostDefaults</span><span class="token punctuation">(</span>webBuilder <span class="token operator">=&gt;</span>
                <span class="token punctuation">{</span>
                    webBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UseStartup</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Startup<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="输出日志" tabindex="-1"><a class="header-anchor" href="#输出日志"><span>输出日志</span></a></h3><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>            Log<span class="token punctuation">.</span><span class="token function">Information</span><span class="token punctuation">(</span><span class="token string">&quot;ConfigureServices&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Log<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;测试Serilog添加异常日志&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;测试Serilog添加严重日志&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置界面" tabindex="-1"><a class="header-anchor" href="#配置界面"><span>配置界面</span></a></h3><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>            <span class="token comment">//在浏览器中导航到 /logdashboard</span>
            services<span class="token punctuation">.</span><span class="token function">AddLogDashboard</span><span class="token punctuation">(</span>opt <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                opt<span class="token punctuation">.</span><span class="token function">AddAuthorizationFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">LogDashboardBasicAuthFilter</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//配置默认的</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            app<span class="token punctuation">.</span><span class="token function">UseLogDashboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>授权访问支持：角色过滤器、WWW-authenticate过滤器、自定义过滤器</p></blockquote><h3 id="访问" tabindex="-1"><a class="header-anchor" href="#访问"><span>访问</span></a></h3><p><img src="`+u+'" alt="image.png" loading="lazy"> 输入刚刚配置好的账号密码 <img src="'+r+'" alt="image.png" loading="lazy"></p><blockquote><p>这里就是我们的可视化界面</p></blockquote>',10);function f(L,_){const t=o("ExternalLinkIcon"),e=o("PackageReference");return i(),l("div",null,[k,g,n("blockquote",null,[n("p",null,[a("官网地址："),n("a",m,[a("https://doc.logdashboard.net/"),s(t)]),a(" GitHub："),n("a",h,[a("https://github.com/realLiangshiwei/LogDashboard"),s(t)])])]),b,n("blockquote",null,[n("p",null,[s(e,{Include:"LogDashboard",Version:"1.4.6"}),a("    "),s(e,{Include:"Serilog.AspNetCore",Version:"4.1.0"})])]),v])}const x=c(d,[["render",f],["__file","keshihualogdashboard.html.vue"]]),D=JSON.parse('{"path":"/dotnet/base/logOperator/compomemt/keshihualogdashboard.html","title":"可视化LogDashboard","lang":"zh-CN","frontmatter":{"title":"可视化LogDashboard","lang":"zh-CN","date":"2023-10-02T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dotNET"],"tag":["无"],"filename":"keshihualogdashboard","slug":"qfogq7","docsId":"43801665","description":"介绍 LogDashboard是在github上开源的aspnetcore项目, 它旨在帮助开发人员排查项目运行中出现错误时快速查看日志排查问题。 官网地址：https://doc.logdashboard.net/ GitHub：https://github.com/realLiangshiwei/LogDashboard 支持的日志组件：nlog、...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dotnet/base/logOperator/compomemt/keshihualogdashboard.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"可视化LogDashboard"}],["meta",{"property":"og:description","content":"介绍 LogDashboard是在github上开源的aspnetcore项目, 它旨在帮助开发人员排查项目运行中出现错误时快速查看日志排查问题。 官网地址：https://doc.logdashboard.net/ GitHub：https://github.com/realLiangshiwei/LogDashboard 支持的日志组件：nlog、..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1618728496588-3edb734c-2f97-4b1a-a862-debdf836f1b8.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-12-22T13:47:53.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2023-10-02T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-12-22T13:47:53.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"可视化LogDashboard\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1618728496588-3edb734c-2f97-4b1a-a862-debdf836f1b8.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1618728549145-37e03444-0103-4f04-917a-3d153ae07731.png\\"],\\"datePublished\\":\\"2023-10-02T00:00:00.000Z\\",\\"dateModified\\":\\"2023-12-22T13:47:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"简单使用","slug":"简单使用","link":"#简单使用","children":[{"level":3,"title":"程序","slug":"程序","link":"#程序","children":[]},{"level":3,"title":"安装组件","slug":"安装组件","link":"#安装组件","children":[]},{"level":3,"title":"配置日志","slug":"配置日志","link":"#配置日志","children":[]},{"level":3,"title":"输出日志","slug":"输出日志","link":"#输出日志","children":[]},{"level":3,"title":"配置界面","slug":"配置界面","link":"#配置界面","children":[]},{"level":3,"title":"访问","slug":"访问","link":"#访问","children":[]}]}],"git":{"createdTime":1697962303000,"updatedTime":1703252873000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":1.22,"words":367},"filePathRelative":"dotnet/base/logOperator/compomemt/keshihualogdashboard.md","localizedDate":"2023年10月2日","excerpt":"<h2>介绍</h2>\\n<p><code>LogDashboard</code>是在github上开源的aspnetcore项目, 它旨在帮助开发人员排查项目运行中出现错误时快速查看日志排查问题。</p>\\n<blockquote>\\n<p>官网地址：<a href=\\"https://doc.logdashboard.net/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://doc.logdashboard.net/</a>\\nGitHub：<a href=\\"https://github.com/realLiangshiwei/LogDashboard\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://github.com/realLiangshiwei/LogDashboard</a></p>\\n</blockquote>","autoDesc":true}');export{x as comp,D as data};

import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as p,c,b as n,e as s,f as t,d as i}from"./app-D8HBJYTp.js";const l="/kbms/common/1690425219731-68d0c7fa-5f26-48b2-8155-7edb57db83ea.png",u={},r=n("h2",{id:"介绍",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#介绍"},[n("span",null,"介绍")])],-1),d={href:"https://datalust.co/seq",target:"_blank",rel:"noopener noreferrer"},k={href:"https://docs.datalust.co/docs",target:"_blank",rel:"noopener noreferrer"},m=i(`<h2 id="支持组件" tabindex="-1"><a class="header-anchor" href="#支持组件"><span>支持组件</span></a></h2><ul><li>Serilog</li><li>Microsoft.Extensions.Logging</li><li>NLog</li><li>log4Net</li></ul><h2 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h2><p>我们通常在 docker 中启动 Seq 作为单独的 docker-compose 文件 ( docker-compose-logging.hml) 的一部分</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>version<span class="token punctuation">:</span> <span class="token string">&quot;3.5&quot;</span>

services<span class="token punctuation">:</span>

seq<span class="token punctuation">:</span>
    image<span class="token punctuation">:</span> datalust<span class="token operator">/</span>seq<span class="token punctuation">:</span><span class="token class-name">latest</span>
    container_name<span class="token punctuation">:</span> <span class="token class-name">seq</span>
    ports<span class="token punctuation">:</span>
    <span class="token operator">-</span> &#39;<span class="token number">5341</span><span class="token punctuation">:</span><span class="token number">80</span>&#39;
    environment<span class="token punctuation">:</span>
    <span class="token operator">-</span> ACCEPT_EULA<span class="token operator">=</span><span class="token class-name">Y</span>
    networks<span class="token punctuation">:</span>
    <span class="token operator">-</span> gateway<span class="token operator">-</span><span class="token class-name">network</span>

networks<span class="token punctuation">:</span>
gateway<span class="token operator">-</span>network<span class="token punctuation">:</span>
    name<span class="token punctuation">:</span> gateway<span class="token operator">-</span>network
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>docker命令</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>docker run <span class="token operator">--</span>name seq <span class="token operator">-</span>d <span class="token operator">--</span>restart unless<span class="token operator">-</span>stopped <span class="token operator">-</span><span class="token class-name">e</span> ACCEPT_EULA<span class="token operator">=</span>Y <span class="token operator">-</span>p <span class="token number">5341</span><span class="token punctuation">:</span><span class="token number">80</span> datalust<span class="token operator">/</span>seq<span class="token punctuation">:</span>latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="操作" tabindex="-1"><a class="header-anchor" href="#操作"><span>操作</span></a></h2><p>安装nuget包</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>  <span class="token operator">&lt;</span>ItemGroup<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">PackageReference</span> Include<span class="token operator">=</span><span class="token string">&quot;Serilog.AspNetCore&quot;</span> Version<span class="token operator">=</span><span class="token string">&quot;7.0.0&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">PackageReference</span> Include<span class="token operator">=</span><span class="token string">&quot;Serilog.Sinks.Seq&quot;</span> Version<span class="token operator">=</span><span class="token string">&quot;5.2.2&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ItemGroup<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件"><span>配置文件</span></a></h3><p>配置我们的appsettings.Development.json文件以使用 Seq 接收器</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>
<span class="token punctuation">{</span>
  <span class="token string">&quot;Serilog&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;Using&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;Serilog.Sinks.Console&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Serilog.Sinks.Seq&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;MinimumLevel&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;Default&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Debug&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;Override&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;Microsoft&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Warning&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;WriteTo&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string">&quot;Name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Console&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string">&quot;Name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Seq&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Args&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;serverUrl&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;http://localhost:5341&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;apiKey&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;none&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>还未使用成功</p><h3 id="硬编码配置" tabindex="-1"><a class="header-anchor" href="#硬编码配置"><span>硬编码配置</span></a></h3><p>直接在代码中硬编码配置信息</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token comment">//硬编码写配置的方式</span>
Log<span class="token punctuation">.</span>Logger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">LoggerConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span>MinimumLevel<span class="token punctuation">.</span><span class="token function">Information</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//配置日志最低级别</span>
 <span class="token punctuation">.</span>MinimumLevel<span class="token punctuation">.</span><span class="token function">Override</span><span class="token punctuation">(</span><span class="token string">&quot;Microsoft&quot;</span><span class="token punctuation">,</span> LogEventLevel<span class="token punctuation">.</span>Information<span class="token punctuation">)</span>
 <span class="token punctuation">.</span>Enrich<span class="token punctuation">.</span><span class="token function">FromLogContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">.</span>WriteTo<span class="token punctuation">.</span><span class="token function">Console</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RenderedCompactJsonFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//保存为json格式</span>
 <span class="token punctuation">.</span>WriteTo<span class="token punctuation">.</span><span class="token function">Seq</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5341&quot;</span><span class="token punctuation">)</span><span class="token comment">//输出到日志平台</span>
 <span class="token punctuation">.</span><span class="token function">CreateLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">try</span>
<span class="token punctuation">{</span>
    Log<span class="token punctuation">.</span><span class="token function">Information</span><span class="token punctuation">(</span><span class="token string">&quot;Starting web host&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

    builder<span class="token punctuation">.</span>Host<span class="token punctuation">.</span><span class="token function">UseSerilog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>ex<span class="token punctuation">,</span> <span class="token string">&quot;Stopped program because of exception&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">finally</span>
<span class="token punctuation">{</span>
    Log<span class="token punctuation">.</span><span class="token function">CloseAndFlush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后看到日志信息已经输出到seq里面了 <img src="`+l+'" alt="image.png" loading="lazy"></p>',18);function v(g,b){const a=o("ExternalLinkIcon");return p(),c("div",null,[r,n("p",null,[s("Seq是由 Serilog 的作者创建的免费（供本地使用）日志记录工具。它提供高级搜索和过滤功能以及对结构化日志数据的完全访问。虽然我们的日志记录要求现在超出了 Seq 所能提供的范围，但它仍然是本地测试的一个很好的选择。 官网："),n("a",d,[s("https://datalust.co/seq"),t(a)]),s(" 文档："),n("a",k,[s("https://docs.datalust.co/docs"),t(a)])]),m])}const f=e(u,[["render",v],["__file","seq.html.vue"]]),S=JSON.parse('{"path":"/middleware/smallService/distributedObservability/distributedLogger/seq.html","title":"Seq","lang":"zh-CN","frontmatter":{"title":"Seq","lang":"zh-CN","date":"2023-07-27T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["middleware"],"tag":["无"],"filename":"seq","slug":"xz72rx","docsId":"73442318","description":"介绍 Seq是由 Serilog 的作者创建的免费（供本地使用）日志记录工具。它提供高级搜索和过滤功能以及对结构化日志数据的完全访问。虽然我们的日志记录要求现在超出了 Seq 所能提供的范围，但它仍然是本地测试的一个很好的选择。 官网：https://datalust.co/seq 文档：https://docs.datalust.co/docs 支持...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/middleware/smallService/distributedObservability/distributedLogger/seq.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"Seq"}],["meta",{"property":"og:description","content":"介绍 Seq是由 Serilog 的作者创建的免费（供本地使用）日志记录工具。它提供高级搜索和过滤功能以及对结构化日志数据的完全访问。虽然我们的日志记录要求现在超出了 Seq 所能提供的范围，但它仍然是本地测试的一个很好的选择。 官网：https://datalust.co/seq 文档：https://docs.datalust.co/docs 支持..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1690425219731-68d0c7fa-5f26-48b2-8155-7edb57db83ea.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-12-14T11:10:46.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2023-07-27T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-12-14T11:10:46.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Seq\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1690425219731-68d0c7fa-5f26-48b2-8155-7edb57db83ea.png\\"],\\"datePublished\\":\\"2023-07-27T00:00:00.000Z\\",\\"dateModified\\":\\"2023-12-14T11:10:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"支持组件","slug":"支持组件","link":"#支持组件","children":[]},{"level":2,"title":"部署","slug":"部署","link":"#部署","children":[]},{"level":2,"title":"操作","slug":"操作","link":"#操作","children":[{"level":3,"title":"配置文件","slug":"配置文件","link":"#配置文件","children":[]},{"level":3,"title":"硬编码配置","slug":"硬编码配置","link":"#硬编码配置","children":[]}]}],"git":{"createdTime":1697724028000,"updatedTime":1702552246000,"contributors":[{"name":"zhangyunpeng","email":"zhang.yunpeng@synyi.com","commits":1}]},"readingTime":{"minutes":1.32,"words":395},"filePathRelative":"middleware/smallService/distributedObservability/distributedLogger/seq.md","localizedDate":"2023年7月27日","excerpt":"<h2>介绍</h2>\\n<p>Seq是由 Serilog 的作者创建的免费（供本地使用）日志记录工具。它提供高级搜索和过滤功能以及对结构化日志数据的完全访问。虽然我们的日志记录要求现在超出了 Seq 所能提供的范围，但它仍然是本地测试的一个很好的选择。\\n官网：<a href=\\"https://datalust.co/seq\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://datalust.co/seq</a>\\n文档：<a href=\\"https://docs.datalust.co/docs\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://docs.datalust.co/docs</a></p>","autoDesc":true}');export{f as comp,S as data};

import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as r,o as d}from"./app-fQkBsvt-.js";const i={};function n(s,t){return d(),a("div",null,t[0]||(t[0]=[r('<p>持久化就是将内存中的数据放到硬盘上，redis持久化方式有两种，RDB方式(默认)和AOF两种</p><h2 id="_1-rdb保存-默认持久化方式" tabindex="-1"><a class="header-anchor" href="#_1-rdb保存-默认持久化方式"><span>1. RDB保存(默认持久化方式)</span></a></h2><p>RDB<strong>快照</strong>的形式存储，指定时间内操作多少步骤然后就做快照保存。每次保存的文件都比之前大，所以是增量方式。<br> 默认配置：60秒内操作数达到1w次，那么就保存；5分钟内操作超过十次，那么就保存；15分钟内操作超过1条，那么就保存。<br> Save：通过命令save可以强制持久化保存为rdb文件，但是因为redis是单线程的，期间会阻塞redis服务进程，redis服务不再处理任何指令，除非等保存结束。<br> Bgsave：父进程启动一个子进程，然后通过子进程将内存中的数据持久化到文件中，期间不会影响其他的指令操作。</p><blockquote><p>优点：通过快照去还原的时候快。    <br> 缺点：极限情况下会因为还没有持久化而丢失数据。</p></blockquote><p>触发机制--主要三种方式</p><ul><li>save 同步命令(会阻塞redis)</li><li>bgsave 异步命令（fork）</li><li>自动</li></ul><h2 id="_2-aof保存" tabindex="-1"><a class="header-anchor" href="#_2-aof保存"><span>2. AOF保存</span></a></h2><p>通过执行命令然后实现数据追加写入硬盘持久化。每执行一条命令，就在AOF中增加一条记录。当需要恢复时，直接执行AOF写入redis</p><h3 id="_2-1-三种追加方式" tabindex="-1"><a class="header-anchor" href="#_2-1-三种追加方式"><span>2.1 三种追加方式</span></a></h3><table><thead><tr><th>备注</th><th>类型</th><th>安全性</th><th>性能</th></tr></thead><tbody><tr><td>等业务不繁忙的时候，这种操作最不可靠</td><td>no</td><td>低</td><td>高</td></tr><tr><td>1秒钟的周期</td><td>everysec</td><td>比较高</td><td>比较高</td></tr><tr><td>只要有读写</td><td>always</td><td>高</td><td>低</td></tr></tbody></table><blockquote><p>优点：持久化更安全<br> 缺点：恢复时候比较慢，占用空间更大</p></blockquote><h2 id="_3-混合模式持久化" tabindex="-1"><a class="header-anchor" href="#_3-混合模式持久化"><span>3. 混合模式持久化</span></a></h2><p>集成了RDB和AOF的优点，通过AOF方式持久化，然后等文件达到一定量大小的时候，然后将aof生成的文件改成rdb文件。</p><h2 id="_4-区别" tabindex="-1"><a class="header-anchor" href="#_4-区别"><span>4. 区别</span></a></h2><table><thead><tr><th>命令</th><th>RDB</th><th>AOF</th></tr></thead><tbody><tr><td>启动优先级</td><td>低</td><td>高</td></tr><tr><td>体积</td><td>小</td><td>大</td></tr><tr><td>恢复速度</td><td>快</td><td>慢</td></tr><tr><td>数据安全性</td><td>丢数据</td><td>根据策略决定</td></tr><tr><td>轻重</td><td>重</td><td>轻</td></tr><tr><td>备份方式</td><td>增量备份</td><td>全量备份</td></tr></tbody></table><h2 id="文档" tabindex="-1"><a class="header-anchor" href="#文档"><span>文档</span></a></h2><p><a href="https://mp.weixin.qq.com/s/w1FGA-7bl2EYtsVj36g__w" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/w1FGA-7bl2EYtsVj36g__w</a> | 深入解析Redis 持久化机制，面试要考额</p>',17)]))}const h=e(i,[["render",n],["__file","chijiuhua.html.vue"]]),p=JSON.parse('{"path":"/dataBase/redis/jianchanjieshao/chijiuhua.html","title":"持久化","lang":"zh-CN","frontmatter":{"title":"持久化","lang":"zh-CN","date":"2021-11-30T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dataBase"],"tag":["无"],"filename":"chijiuhua","slug":"ya96fr","docsId":"32327229","description":"持久化就是将内存中的数据放到硬盘上，redis持久化方式有两种，RDB方式(默认)和AOF两种 1. RDB保存(默认持久化方式) RDB快照的形式存储，指定时间内操作多少步骤然后就做快照保存。每次保存的文件都比之前大，所以是增量方式。 默认配置：60秒内操作数达到1w次，那么就保存；5分钟内操作超过十次，那么就保存；15分钟内操作超过1条，那么就保存...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dataBase/redis/jianchanjieshao/chijiuhua.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"持久化"}],["meta",{"property":"og:description","content":"持久化就是将内存中的数据放到硬盘上，redis持久化方式有两种，RDB方式(默认)和AOF两种 1. RDB保存(默认持久化方式) RDB快照的形式存储，指定时间内操作多少步骤然后就做快照保存。每次保存的文件都比之前大，所以是增量方式。 默认配置：60秒内操作数达到1w次，那么就保存；5分钟内操作超过十次，那么就保存；15分钟内操作超过1条，那么就保存..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-12-17T11:24:33.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2021-11-30T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-12-17T11:24:33.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"持久化\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-11-30T00:00:00.000Z\\",\\"dateModified\\":\\"2023-12-17T11:24:33.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"1. RDB保存(默认持久化方式)","slug":"_1-rdb保存-默认持久化方式","link":"#_1-rdb保存-默认持久化方式","children":[]},{"level":2,"title":"2. AOF保存","slug":"_2-aof保存","link":"#_2-aof保存","children":[{"level":3,"title":"2.1 三种追加方式","slug":"_2-1-三种追加方式","link":"#_2-1-三种追加方式","children":[]}]},{"level":2,"title":"3. 混合模式持久化","slug":"_3-混合模式持久化","link":"#_3-混合模式持久化","children":[]},{"level":2,"title":"4. 区别","slug":"_4-区别","link":"#_4-区别","children":[]},{"level":2,"title":"文档","slug":"文档","link":"#文档","children":[]}],"git":{"createdTime":1695484404000,"updatedTime":1702812273000,"contributors":[{"name":"zhangyunpeng","username":"zhangyunpeng","email":"zhang.yunpeng@synyi.com","commits":1},{"name":"azrng","username":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":1.98,"words":595},"filePathRelative":"dataBase/redis/jianchanjieshao/chijiuhua.md","localizedDate":"2021年11月30日","excerpt":"<p>持久化就是将内存中的数据放到硬盘上，redis持久化方式有两种，RDB方式(默认)和AOF两种</p>\\n<h2>1. RDB保存(默认持久化方式)</h2>\\n<p>RDB<strong>快照</strong>的形式存储，指定时间内操作多少步骤然后就做快照保存。每次保存的文件都比之前大，所以是增量方式。<br>\\n默认配置：60秒内操作数达到1w次，那么就保存；5分钟内操作超过十次，那么就保存；15分钟内操作超过1条，那么就保存。<br>\\nSave：通过命令save可以强制持久化保存为rdb文件，但是因为redis是单线程的，期间会阻塞redis服务进程，redis服务不再处理任何指令，除非等保存结束。<br>\\nBgsave：父进程启动一个子进程，然后通过子进程将内存中的数据持久化到文件中，期间不会影响其他的指令操作。</p>","autoDesc":true}');export{h as comp,p as data};

import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,d as i,o as r}from"./app-Bg64E3Xi.js";const n={};function s(o,e){return r(),t("div",null,e[0]||(e[0]=[i('<h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p>redis自2.8.0之后版本提供Keyspace Notifications功能，允许客户订阅Pub / Sub频道，以便以某种方式接收影响Redis数据集事件。</p><h2 id="操作" tabindex="-1"><a class="header-anchor" href="#操作"><span>操作</span></a></h2><h3 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h3><p>修改redis.config配置开启过期通知功能，然后重启redis，修改方法如下<br> 打开注释：notify-keyspace-events “Ex”。( 例如，“Kx”表示想监控某个Key的失效事件。 )<br> 注释掉：notify-keyspace-events &quot;&quot;</p><h3 id="实现" tabindex="-1"><a class="header-anchor" href="#实现"><span>实现</span></a></h3><p>事件通过 Redis 的订阅与发布功能（pub/sub）来进行分发,<br> 故需要订阅 <strong>keyevent@0</strong>:expired 通道0表示db0 根据自己的dbindex选择合适的数字。<br><a href="https://www.yuque.com/docs/share/a93bae1b-15fa-4419-90c3-aae33e573daa?view=doc_embed" target="_blank" rel="noopener noreferrer">redis发布订阅</a></p><h2 id="注意" tabindex="-1"><a class="header-anchor" href="#注意"><span>注意</span></a></h2><p>Redis缓存Key过期通知只能收到的是key，value已经过期无法收到，所以需要在key上标记业务数据。只能通过变相的去实现处理业务数据，比如写入数据的时候写两份，一份作为key存储，一份作为value存储！<br> 这是不可靠的实现? 首先Redis Pub/Sub 是一种并不可靠地消息机制，他不会做信息的存储，只是在线转发，那么肯定也没有ack确认机制，另外只有订阅段监听时才会转发，所以不是可靠的通知。</p>',9)]))}const p=a(n,[["render",s]]),h=JSON.parse('{"path":"/middleware/yanchiduilie/redishuancunguojishijian.html","title":"redis缓存过期事件","lang":"zh-CN","frontmatter":{"title":"redis缓存过期事件","lang":"zh-CN","date":"2022-07-12T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["middleware"],"tag":["无"],"filename":"redishuancunguojishijian","slug":"bdar8s","docsId":"81512453","description":"介绍 redis自2.8.0之后版本提供Keyspace Notifications功能，允许客户订阅Pub / Sub频道，以便以某种方式接收影响Redis数据集事件。 操作 配置 修改redis.config配置开启过期通知功能，然后重启redis，修改方法如下 打开注释：notify-keyspace-events “Ex”。( 例如，“Kx”表...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"redis缓存过期事件\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-07-12T00:00:00.000Z\\",\\"dateModified\\":\\"2023-10-19T14:00:28.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"],["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/middleware/yanchiduilie/redishuancunguojishijian.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"redis缓存过期事件"}],["meta",{"property":"og:description","content":"介绍 redis自2.8.0之后版本提供Keyspace Notifications功能，允许客户订阅Pub / Sub频道，以便以某种方式接收影响Redis数据集事件。 操作 配置 修改redis.config配置开启过期通知功能，然后重启redis，修改方法如下 打开注释：notify-keyspace-events “Ex”。( 例如，“Kx”表..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-10-19T14:00:28.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2022-07-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-10-19T14:00:28.000Z"}]]},"git":{"createdTime":1697724028000,"updatedTime":1697724028000,"contributors":[{"name":"azrng","username":"","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":1.16,"words":347},"filePathRelative":"middleware/yanchiduilie/redishuancunguojishijian.md","excerpt":"<h2>介绍</h2>\\n<p>redis自2.8.0之后版本提供Keyspace Notifications功能，允许客户订阅Pub / Sub频道，以便以某种方式接收影响Redis数据集事件。</p>\\n<h2>操作</h2>\\n<h3>配置</h3>\\n<p>修改redis.config配置开启过期通知功能，然后重启redis，修改方法如下<br>\\n打开注释：notify-keyspace-events  “Ex”。( 例如，“Kx”表示想监控某个Key的失效事件。 )<br>\\n注释掉：notify-keyspace-events  \\"\\"</p>\\n<h3>实现</h3>\\n<p>事件通过 Redis 的订阅与发布功能（pub/sub）来进行分发,<br>\\n故需要订阅 <strong>keyevent@0</strong>:expired 通道0表示db0 根据自己的dbindex选择合适的数字。<br>\\n<a href=\\"https://www.yuque.com/docs/share/a93bae1b-15fa-4419-90c3-aae33e573daa?view=doc_embed\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">redis发布订阅</a></p>","autoDesc":true}');export{p as comp,h as data};

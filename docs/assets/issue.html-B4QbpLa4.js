import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as t,c as e,b as n,e as i,f as l,d as h,o as p}from"./app-BuY9BHbl.js";const k="/kbms/common/1609562353775-e3df218a-3e64-4a54-b05c-a4189cf8c036.png",r="/kbms/common/1609562353796-5e1ff8cd-3401-4ca7-83d0-284daabbbc8b.png",g={},d=h('<h2 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h2><p>托管方式： 进程外：IIS工作进程(w3wp.exe)托管 进程内：自托管web服务器(Kestrel)</p><figure><img src="'+k+'" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><figure><img src="'+r+`" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>如果使用swagger，切记一定要注意xml文档问题，很容易缺失导致出错。</p><h2 id="访问swagger提示404" tabindex="-1"><a class="header-anchor" href="#访问swagger提示404"><span>访问swagger提示404</span></a></h2><p>通常会在代码中限制ASPNETCORE_ENVIRONMENT为Production时关闭swagger。但是往往我们需要将api发布到本地iis调试或供他人使用时，swagger将会被禁止。发布后项目往往默认为Production环境，将其修改为Development即可解决。 解决办法： 打开发布好的项目，找到web.config文件，添加以下代码：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">environmentVariables</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">environmentVariable</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ASPNETCORE_ENVIRONMENT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Development&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> &lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">environmentVariables</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改webconfig的大概结构是：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E06C75;"> version</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;utf-8&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">configuration</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">location</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> inheritInChildApplications</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;false&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">system</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">webServer</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;aspNetCore&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> path</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> verb</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> modules</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;AspNetCoreModuleV2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> resourceType</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Unspecified&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">aspNetCore</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> processPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;dotnet&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> arguments</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;*.dll&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> stdoutLogEnabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> stdoutLogFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;.</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\l</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ogs</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\s</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">tdout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> hostingModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;InProcess&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">environmentVariables</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">environmentVariable</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ASPNETCORE_ENVIRONMENT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Development&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">environmentVariables</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">aspNetCore</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">system</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">webServer</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">configuration</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ProjectGuid</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;"> 15af0485</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">b65a</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">422a</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">bf12</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">5877b85abb6c</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="hostingmodel" tabindex="-1"><a class="header-anchor" href="#hostingmodel"><span>hostingModel</span></a></h2><ul><li>在节点 system.webServer/aspNetCore.hostingModel 中，可以选择的值为：inprocess(进程内托管)/outofprocess(进程外托管)，通过设置 hostingModel 的值来选择不同的托管模式</li><li>进程内托管</li></ul><p>选择进程内托管，意味着将 .NetCore 应用程序的工作进程托管到 IIS 的工作进程 w3wp.exe 中，使用的 IIS 进程内服务器，即使用的是：IISHttpServer。</p><ul><li>进程外托管</li></ul><p>选择进程外托管时，web.config 配置节点system.webServer/aspNetCore.hostingModel 的值必须设置为：outofprocess，选择进程外托管，实际上就是告诉 IIS ，当前应用程序不使用 IISHttpServer，改为使用Kestrel 服务器</p><h2 id="an-error-occurred-while-starting-the-application" tabindex="-1"><a class="header-anchor" href="#an-error-occurred-while-starting-the-application"><span>An error occurred while starting the application</span></a></h2><p>项目已经可以启动，证明环境已经正常，只不过在项目启动的时候，出现了错误，也就是说是项目代码的问题。 解决办法： 查看日志，看项目文件是否齐全</p>`,17);function o(c,y){const s=t("aspNetCore");return p(),e("div",null,[d,n("p",null,[i("可以启用日志  "),l(s,{processPath:"dotnet",arguments:".\\TicketPlatform.Web.dll",stdoutLogEnabled:"true",stdoutLogFile:".\\logs\\"}),i(" 如果按照上面这种办法，那么记得创建logs文件夹")])])}const u=a(g,[["render",o],["__file","issue.html.vue"]]),b=JSON.parse('{"path":"/dotnet/buildAndRelease/release/iis/issue.html","title":"问题","lang":"zh-CN","frontmatter":{"title":"问题","lang":"zh-CN","date":"2021-01-02T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dotNET"],"tag":["无"],"filename":"anerroroccurredwhilestartingtheapplication","slug":"wvv9z3","docsId":"29455075","description":"部署 托管方式： 进程外：IIS工作进程(w3wp.exe)托管 进程内：自托管web服务器(Kestrel) image.pngimage.png image.pngimage.png 如果使用swagger，切记一定要注意xml文档问题，很容易缺失导致出错。 访问swagger提示404 通常会在代码中限制ASPNETCORE_ENVIRONMEN...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dotnet/buildAndRelease/release/iis/issue.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"问题"}],["meta",{"property":"og:description","content":"部署 托管方式： 进程外：IIS工作进程(w3wp.exe)托管 进程内：自托管web服务器(Kestrel) image.pngimage.png image.pngimage.png 如果使用swagger，切记一定要注意xml文档问题，很容易缺失导致出错。 访问swagger提示404 通常会在代码中限制ASPNETCORE_ENVIRONMEN..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1609562353775-e3df218a-3e64-4a54-b05c-a4189cf8c036.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-25T15:31:40.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2021-01-02T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-25T15:31:40.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"问题\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1609562353775-e3df218a-3e64-4a54-b05c-a4189cf8c036.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1609562353796-5e1ff8cd-3401-4ca7-83d0-284daabbbc8b.png\\"],\\"datePublished\\":\\"2021-01-02T00:00:00.000Z\\",\\"dateModified\\":\\"2024-02-25T15:31:40.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"部署","slug":"部署","link":"#部署","children":[]},{"level":2,"title":"访问swagger提示404","slug":"访问swagger提示404","link":"#访问swagger提示404","children":[]},{"level":2,"title":"hostingModel","slug":"hostingmodel","link":"#hostingmodel","children":[]},{"level":2,"title":"An error occurred while starting the application","slug":"an-error-occurred-while-starting-the-application","link":"#an-error-occurred-while-starting-the-application","children":[]}],"git":{"createdTime":1708875100000,"updatedTime":1708875100000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":1.76,"words":529},"filePathRelative":"dotnet/buildAndRelease/release/iis/issue.md","localizedDate":"2021年1月2日","excerpt":"<h2>部署</h2>\\n<p>托管方式：\\n进程外：IIS工作进程(w3wp.exe)托管\\n进程内：自托管web服务器(Kestrel)</p>\\n<figure><img src=\\"/common/1609562353775-e3df218a-3e64-4a54-b05c-a4189cf8c036.png\\" alt=\\"image.png\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>image.png</figcaption></figure>\\n<figure><img src=\\"/common/1609562353796-5e1ff8cd-3401-4ca7-83d0-284daabbbc8b.png\\" alt=\\"image.png\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>image.png</figcaption></figure>","autoDesc":true}');export{u as comp,b as data};

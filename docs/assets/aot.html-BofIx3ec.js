import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,o as a,d as t}from"./app-BuY9BHbl.js";const e={},n=t(`<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>.NET Native Ahead-of-Time （AOT） 编译是 .NET 平台中的前沿技术。使用 AOT，C# 代码被编译为开发人员计算机上的本机代码。这与传统方法形成鲜明对比，在传统方法中代码是在运行时被编译为本机代码。</p><p>官方文档：<a href="https://learn.microsoft.com/zh-cn/dotnet/core/deploying/native-aot" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/dotnet/core/deploying/native-aot</a></p><h2 id="优缺点" tabindex="-1"><a class="header-anchor" href="#优缺点"><span>优缺点</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>资料来自Aot优缺点：<a href="https://blog.ndepend.com/net-native-aot-explained/" target="_blank" rel="noopener noreferrer">https://blog.ndepend.com/net-native-aot-explained/</a></p></div><h3 id="优点" tabindex="-1"><a class="header-anchor" href="#优点"><span>优点</span></a></h3><p>.NET Native Ahead-of-Time （AOT） 编译带来了一系列优势：</p><ul><li>增强的性能：通过将代码预编译为本机计算机指令，.NET Native AOT 可显著缩短启动时间并提高整体应用程序性能。运行时没有 JIT 编译开销，这意味着执行速度更快，从而提供更流畅的用户体验。</li><li>简化部署：AOT 编译的应用程序通常会产生具有零或更少依赖项的独立可执行文件。这简化了部署过程，可以更轻松地在各种平台和设备上分发应用程序，而无需额外的安装或运行时组件。</li><li>更小的应用程序大小：通过剪裁不必要的代码，AOT 可以大大减小应用程序的大小。这不仅节省了存储空间，还优化了应用程序的内存占用，这在移动设备或物联网设备等资源受限的环境中尤为重要。</li><li>增强的知识产权保护：AOT 编译将源代码转换为优化的机器代码，使逆向工程尝试更具挑战性。生成的本机代码比 IL 代码更模糊，更难破译，IL 代码可以很容易地反编译为原始 C# 代码。这增强了应用程序中嵌入的敏感算法、业务逻辑和专有方法的安全性。</li></ul><h3 id="缺点" tabindex="-1"><a class="header-anchor" href="#缺点"><span>缺点</span></a></h3><p>使用 AOT 获得的好处不可避免地伴随着某些缺点。他们来了：</p><ul><li>特定于平台的编译：.NET Native AOT 生成特定于平台的本机代码，这些代码针对特定体系结构或操作系统进行定制。例如，与常规 .NET 程序集不同，在具有 AOT 的 Windows 上生成的可执行文件在 Linux 上不起作用。</li><li>不支持跨操作系统编译。例如，从 Windows 机器中，您无法编译 Linux 本机版本，反之亦然。</li><li>对反射的部分支持：反射依赖于动态代码生成和运行时类型发现，这与 AOT 编译代码的预编译和静态特性相冲突。但是，我们将在本文末尾看到，通常的 Reflection 用法与 AOT 配合得很好。</li><li>需要 AOT 兼容依赖项：AOT 编译要求项目中使用的所有库和依赖项都与 AOT 兼容。依赖于反射、运行时代码生成或其他动态行为的库可能与 AOT 不兼容，从而可能导致冲突或运行时错误。</li><li>增加构建时间：AOT 编译涉及在构建过程中预先生成本机代码。这个额外的步骤可以显著增加构建时间，特别是对于具有广泛代码库的大型项目或应用程序。</li><li>需要适用于 C++ 的桌面开发工具：AOT 只能在安装这些工具的情况下进行编译。</li></ul><h2 id="使用场景" tabindex="-1"><a class="header-anchor" href="#使用场景"><span>使用场景</span></a></h2><ul><li>FaaS类服务，对于一些复杂算法，独立计算类小服务，可以用AOT来发布。</li><li>对于一些基础服务，调用频率高，要求更高的性价比：占用资源少，产出高，如果采用AOT发布，我们启动两个Pod，资源用不到原来的一半，RPS却有大幅增加，这是很划算的性价。</li><li>再有就是一些简单，功能单一的业务服务也可以考虑用AOT发布，因为业务复杂的服务，所需的技术就会复杂，这对现阶段的AOT开发有一定的开发代价。</li></ul><p>资料：https://mp.weixin.qq.com/s/lbl3Pl_XkATpQ7nNWukB7g</p><h2 id="命令" tabindex="-1"><a class="header-anchor" href="#命令"><span>命令</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>需要具有“使用 C++ 的桌面开发”的工作负载</p></div><p>项目文件配置</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">PropertyGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">OutputType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;Exe&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">OutputType</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">TargetFrameworks</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;net7.0;net8.0&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">TargetFrameworks</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">ImplicitUsings</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;enable&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">ImplicitUsings</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">Nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;enable&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">Nullable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">	&lt;!--aot发布--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">PublishAot</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;true&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">PublishAot</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">	&lt;!--引入的大小与速度选项--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">OptimizationPreference</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;Size&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">OptimizationPreference</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">	&lt;!--不需要特定于全球化的代码和数据，使用固定模式--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">InvariantGlobalization</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;true&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">InvariantGlobalization</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">	&lt;!--不关心在发生异常时拥有良好的堆栈跟踪--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">StackTraceSupport</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;false&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">StackTraceSupport</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">PropertyGroup</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后执行下面的命令去进行发布</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">## 发布linux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dotnet</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> net8.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> linux-x64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Release</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">## 发布win</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">dotnet</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> publish</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> net8.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> win-x64</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> Release</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="rd-xml" tabindex="-1"><a class="header-anchor" href="#rd-xml"><span>Rd.xml</span></a></h2><p>官网文档：https://learn.microsoft.com/zh-cn/windows/uwp/dotnet-native/runtime-directives-rd-xml-configuration-file-reference</p><p>写法示例：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D19A66;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D19A66;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">Directives</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D19A66;"> xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http://schemas.microsoft.com/netfx/2013/01/metadata&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">Assembly</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D19A66;"> Name</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Semi.Avalonia&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D19A66;"> Serialize</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Required Public&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">Assembly</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">Directives</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>aot 中Rd.xml 文件格式语法中文说明以及处理错误的实战案例：https://www.jianshu.com/p/56e9d8246784</p><h2 id="开源组件" tabindex="-1"><a class="header-anchor" href="#开源组件"><span>开源组件</span></a></h2><h3 id="publishaotcompressed" tabindex="-1"><a class="header-anchor" href="#publishaotcompressed"><span>PublishAotCompressed</span></a></h3><p>这是一个AOT压缩的NuGet 包，其中包含 MSBuild 目标，用于使用 <a href="https://upx.github.io/" target="_blank" rel="noopener noreferrer">UPX</a> 压缩 <a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/native-aot/" target="_blank" rel="noopener noreferrer">PublishAot</a> 的结果。只需添加对此包的引用，然后像往常一样发布即可。AOT 编译的结果将被压缩。UPX 通常可节省 60% 或更多的尺寸。</p><p>说明：<a href="https://www.nuget.org/packages/PublishAotCompressed" target="_blank" rel="noopener noreferrer">https://www.nuget.org/packages/PublishAotCompressed</a></p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#E06C75;">PackageReference</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D19A66;"> Condition</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&#39;$(Configuration)&#39; == &#39;Release&#39;&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D19A66;"> Include</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;PublishAotCompressed&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#D19A66;"> Version</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;1.0.3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>项目文件说明</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">发布时候使用的配置</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">PropertyGroup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E06C75;"> Condition</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;&#39;$(Configuration)&#39; == &#39;Release&#39;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">发布裁剪</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PublishTrimmed</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PublishTrimmed</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">自包含</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SelfContained</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">SelfContained</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Aot发布</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PublishAot</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PublishAot</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">引入的大小与速度选项</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">OptimizationPreference</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Size</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">OptimizationPreference</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">不关心在发生异常时拥有良好的堆栈跟踪</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">StackTraceSupport</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">StackTraceSupport</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;!--</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> 启动后打包大小更小</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">，</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">但是启动会变慢</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">，</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">以及内存占用会增加</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">    &lt;!--&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PublishLzmaCompressed</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PublishLzmaCompressed</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;--&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">PropertyGroup</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="issue" tabindex="-1"><a class="header-anchor" href="#issue"><span>Issue</span></a></h2><h3 id="aot和单文件打包互斥" tabindex="-1"><a class="header-anchor" href="#aot和单文件打包互斥"><span>AOT和单文件打包互斥</span></a></h3><p>提示错误信息：PublishAot and PublishSingleFile can not be specified at the same time</p><p>官网说明：<a href="https://learn.microsoft.com/en-us/dotnet/core/deploying/single-file/overview?tabs=cli" target="_blank" rel="noopener noreferrer">此处</a></p><p>这个时候如果还想生成一个单文件，那么可以使用Costura.Fody来进行操作。</p><h2 id="资料" tabindex="-1"><a class="header-anchor" href="#资料"><span>资料</span></a></h2><p>AOT的使用以及.net与Go相互调用：<a href="https://mp.weixin.qq.com/s/s9NO75My21oC3Erz_64-Wg" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/s9NO75My21oC3Erz_64-Wg</a><br> 本机 AOT 的 ASP.NET Core支持：<a href="https://learn.microsoft.com/zh-cn/aspnet/core/fundamentals/native-aot?view=aspnetcore-8.0" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/aspnet/core/fundamentals/native-aot?view=aspnetcore-8.0</a><br> AOT和单位件发布对程序性能的影响：<a href="https://www.cnblogs.com/InCerry/p/Single-File-And-AOT-Publish.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/InCerry/p/Single-File-And-AOT-Publish.html </a></p><p>NET 8 NativeAOT 用法指南：https://mp.weixin.qq.com/s/aRhem0fJ2HNzRgtis5BhbQ</p><p>让.NET Native AOT应用兼容Windows 7/Vista：https://zhuanlan.zhihu.com/p/695992746?utm_source=wechat_session&amp;utm_medium=social&amp;s_r=0</p>`,41),l=[n];function h(p,k){return a(),s("div",null,l)}const g=i(e,[["render",h],["__file","aot.html.vue"]]),o=JSON.parse('{"path":"/dotnet/buildAndRelease/aot.html","title":"AOT","lang":"zh-CN","frontmatter":{"title":"AOT","lang":"zh-CN","date":"2023-09-14T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dotNET"],"tag":["无"],"filename":"readme","slug":"ru7m7o41ti8lt2g1","docsId":"125498061","description":"概述 .NET Native Ahead-of-Time （AOT） 编译是 .NET 平台中的前沿技术。使用 AOT，C# 代码被编译为开发人员计算机上的本机代码。这与传统方法形成鲜明对比，在传统方法中代码是在运行时被编译为本机代码。 官方文档：https://learn.microsoft.com/zh-cn/dotnet/core/deployi...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dotnet/buildAndRelease/aot.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"AOT"}],["meta",{"property":"og:description","content":"概述 .NET Native Ahead-of-Time （AOT） 编译是 .NET 平台中的前沿技术。使用 AOT，C# 代码被编译为开发人员计算机上的本机代码。这与传统方法形成鲜明对比，在传统方法中代码是在运行时被编译为本机代码。 官方文档：https://learn.microsoft.com/zh-cn/dotnet/core/deployi..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-29T14:15:26.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2023-09-14T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-29T14:15:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AOT\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-09-14T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-29T14:15:26.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"优缺点","slug":"优缺点","link":"#优缺点","children":[{"level":3,"title":"优点","slug":"优点","link":"#优点","children":[]},{"level":3,"title":"缺点","slug":"缺点","link":"#缺点","children":[]}]},{"level":2,"title":"使用场景","slug":"使用场景","link":"#使用场景","children":[]},{"level":2,"title":"命令","slug":"命令","link":"#命令","children":[]},{"level":2,"title":"Rd.xml","slug":"rd-xml","link":"#rd-xml","children":[]},{"level":2,"title":"开源组件","slug":"开源组件","link":"#开源组件","children":[{"level":3,"title":"PublishAotCompressed","slug":"publishaotcompressed","link":"#publishaotcompressed","children":[]}]},{"level":2,"title":"Issue","slug":"issue","link":"#issue","children":[{"level":3,"title":"AOT和单文件打包互斥","slug":"aot和单文件打包互斥","link":"#aot和单文件打包互斥","children":[]}]},{"level":2,"title":"资料","slug":"资料","link":"#资料","children":[]}],"git":{"createdTime":1702044169000,"updatedTime":1722262526000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":8}]},"readingTime":{"minutes":5.34,"words":1602},"filePathRelative":"dotnet/buildAndRelease/aot.md","localizedDate":"2023年9月14日","excerpt":"<h2>概述</h2>\\n<p>.NET Native Ahead-of-Time （AOT） 编译是 .NET 平台中的前沿技术。使用 AOT，C# 代码被编译为开发人员计算机上的本机代码。这与传统方法形成鲜明对比，在传统方法中代码是在运行时被编译为本机代码。</p>\\n<p>官方文档：<a href=\\"https://learn.microsoft.com/zh-cn/dotnet/core/deploying/native-aot\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://learn.microsoft.com/zh-cn/dotnet/core/deploying/native-aot</a></p>","autoDesc":true}');export{g as comp,o as data};

import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as e,c as n,d as t}from"./app-D8HBJYTp.js";const s="/kbms/common/1620442383916-8bb2f13d-a760-4c42-93cd-182f68a9ef45.png",o="/kbms/common/1620442413509-597667a4-cd08-49d7-8655-3a8a1ad86cab.png",i="/kbms/common/1620443537213-f303ba9e-d877-42fe-9aa6-30096b524b21.png",r={},p=t('<p>多个上下文：有两种类型的数据需要持久化到数据库中</p><h4 id="官方自带上下文" tabindex="-1"><a class="header-anchor" href="#官方自带上下文"><span>官方自带上下文</span></a></h4><h5 id="configurationdbcontext" tabindex="-1"><a class="header-anchor" href="#configurationdbcontext"><span>ConfigurationDbContext</span></a></h5><p>配置数据(资源、客户端、身份) <img src="'+s+`" alt="image.png" loading="lazy"> 生成迁移文件</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code><span class="token function">add-migration</span> InitialIdentityServerConfigurationDbMigration <span class="token operator">-</span>c ConfigurationDbContext <span class="token operator">-</span>o <span class="token keyword">Data</span><span class="token operator">/</span>Migrations/IdentityServer/ConfigurationDb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5 id="persistedgrantdbcontext" tabindex="-1"><a class="header-anchor" href="#persistedgrantdbcontext"><span>PersistedGrantDbContext</span></a></h5><p>使用中产生的操作数据(令牌、代码和用户授权信息) <img src="`+o+`" alt="image.png" loading="lazy"> 生成迁移文件</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code><span class="token function">add-migration</span> InitialIdentityServerPersistedGrantDbMigration <span class="token operator">-</span>c PersistedGrantDbContext <span class="token operator">-</span>o <span class="token keyword">Data</span><span class="token operator">/</span>Migrations/IdentityServer/PersistedGrantDb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="扩展库" tabindex="-1"><a class="header-anchor" href="#扩展库"><span>扩展库</span></a></h4><h5 id="applicationdbcontext" tabindex="-1"><a class="header-anchor" href="#applicationdbcontext"><span>ApplicationDbContext</span></a></h5><figure><img src="`+i+`" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h4 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h4><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">add</span><span class="token operator">-</span>migration InitialIdentityServerPersistedGrantDbMigration <span class="token operator">-</span>c PersistedGrantDbContext <span class="token operator">-</span>o <span class="token keyword">Data</span><span class="token operator">/</span>Migrations<span class="token operator">/</span>IdentityServer<span class="token operator">/</span>PersistedGrantDb 
<span class="token keyword">add</span><span class="token operator">-</span>migration InitialIdentityServerConfigurationDbMigration <span class="token operator">-</span>c ConfigurationDbContext <span class="token operator">-</span>o <span class="token keyword">Data</span><span class="token operator">/</span>Migrations<span class="token operator">/</span>IdentityServer<span class="token operator">/</span>ConfigurationDb
<span class="token keyword">add</span><span class="token operator">-</span>migration AppDbMigration <span class="token operator">-</span>c ApplicationDbContext <span class="token operator">-</span>o <span class="token keyword">Data</span>
<span class="token keyword">update</span><span class="token operator">-</span><span class="token keyword">database</span> <span class="token operator">-</span>c PersistedGrantDbContext
<span class="token keyword">update</span><span class="token operator">-</span><span class="token keyword">database</span> <span class="token operator">-</span>c ConfigurationDbContext
<span class="token keyword">update</span><span class="token operator">-</span><span class="token keyword">database</span> <span class="token operator">-</span>c ApplicationDbContext
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13),l=[p];function c(d,g){return e(),n("div",null,l)}const h=a(r,[["render",c],["__file","chijiuhuabiaoshuiming.html.vue"]]),u=JSON.parse('{"path":"/middleware/authorize/identityserver4/chijiuhuabiaoshuiming.html","title":"持久化表说明","lang":"zh-CN","frontmatter":{"title":"持久化表说明","lang":"zh-CN","date":"2022-05-02T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["middleware"],"tag":["无"],"filename":"chijiuhuabiaoshuiming","slug":"sv80q1","docsId":"44892889","description":"多个上下文：有两种类型的数据需要持久化到数据库中 官方自带上下文 ConfigurationDbContext 配置数据(资源、客户端、身份) image.png 生成迁移文件 PersistedGrantDbContext 使用中产生的操作数据(令牌、代码和用户授权信息) image.png 生成迁移文件 扩展库 ApplicationDbConte...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/middleware/authorize/identityserver4/chijiuhuabiaoshuiming.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"持久化表说明"}],["meta",{"property":"og:description","content":"多个上下文：有两种类型的数据需要持久化到数据库中 官方自带上下文 ConfigurationDbContext 配置数据(资源、客户端、身份) image.png 生成迁移文件 PersistedGrantDbContext 使用中产生的操作数据(令牌、代码和用户授权信息) image.png 生成迁移文件 扩展库 ApplicationDbConte..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1620442383916-8bb2f13d-a760-4c42-93cd-182f68a9ef45.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-16T05:03:06.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2022-05-02T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-16T05:03:06.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"持久化表说明\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1620442383916-8bb2f13d-a760-4c42-93cd-182f68a9ef45.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1620442413509-597667a4-cd08-49d7-8655-3a8a1ad86cab.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1620443537213-f303ba9e-d877-42fe-9aa6-30096b524b21.png\\"],\\"datePublished\\":\\"2022-05-02T00:00:00.000Z\\",\\"dateModified\\":\\"2024-02-16T05:03:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":4,"title":"官方自带上下文","slug":"官方自带上下文","link":"#官方自带上下文","children":[{"level":5,"title":"ConfigurationDbContext","slug":"configurationdbcontext","link":"#configurationdbcontext","children":[]},{"level":5,"title":"PersistedGrantDbContext","slug":"persistedgrantdbcontext","link":"#persistedgrantdbcontext","children":[]}]},{"level":4,"title":"扩展库","slug":"扩展库","link":"#扩展库","children":[{"level":5,"title":"ApplicationDbContext","slug":"applicationdbcontext","link":"#applicationdbcontext","children":[]}]},{"level":4,"title":"总结","slug":"总结","link":"#总结","children":[]}],"git":{"createdTime":1697724028000,"updatedTime":1708059786000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":0.61,"words":183},"filePathRelative":"middleware/authorize/identityserver4/chijiuhuabiaoshuiming.md","localizedDate":"2022年5月2日","excerpt":"<p>多个上下文：有两种类型的数据需要持久化到数据库中</p>\\n<h4>官方自带上下文</h4>\\n<h5>ConfigurationDbContext</h5>\\n<p>配置数据(资源、客户端、身份)\\n<img src=\\"/common/1620442383916-8bb2f13d-a760-4c42-93cd-182f68a9ef45.png\\" alt=\\"image.png\\" loading=\\"lazy\\">\\n生成迁移文件</p>\\n<div class=\\"language-powershell\\" data-ext=\\"powershell\\" data-title=\\"powershell\\"><pre class=\\"language-powershell\\"><code><span class=\\"token function\\">add-migration</span> InitialIdentityServerConfigurationDbMigration <span class=\\"token operator\\">-</span>c ConfigurationDbContext <span class=\\"token operator\\">-</span>o <span class=\\"token keyword\\">Data</span><span class=\\"token operator\\">/</span>Migrations/IdentityServer/ConfigurationDb\\n</code></pre></div>","autoDesc":true}');export{h as comp,u as data};

import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,e as t,o as e}from"./app-SmdjEsew.js";const n="/kbms/common/1620442383916-8bb2f13d-a760-4c42-93cd-182f68a9ef45.png",r="/kbms/common/1620442413509-597667a4-cd08-49d7-8655-3a8a1ad86cab.png",h="/kbms/common/1620443537213-f303ba9e-d877-42fe-9aa6-30096b524b21.png",l={};function p(d,i){return e(),a("div",null,i[0]||(i[0]=[t('<p>多个上下文：有两种类型的数据需要持久化到数据库中</p><h4 id="官方自带上下文" tabindex="-1"><a class="header-anchor" href="#官方自带上下文"><span>官方自带上下文</span></a></h4><h5 id="configurationdbcontext" tabindex="-1"><a class="header-anchor" href="#configurationdbcontext"><span>ConfigurationDbContext</span></a></h5><p>配置数据(资源、客户端、身份)<br><img src="'+n+'" alt="image.png" loading="lazy"><br> 生成迁移文件</p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">add-migration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> InitialIdentityServerConfigurationDbMigration </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">c ConfigurationDbContext </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">o </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Data</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Migrations</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">IdentityServer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">ConfigurationDb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="persistedgrantdbcontext" tabindex="-1"><a class="header-anchor" href="#persistedgrantdbcontext"><span>PersistedGrantDbContext</span></a></h5><p>使用中产生的操作数据(令牌、代码和用户授权信息)<br><img src="'+r+'" alt="image.png" loading="lazy"><br> 生成迁移文件</p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-powershell"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">add-migration</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> InitialIdentityServerPersistedGrantDbMigration </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">c PersistedGrantDbContext </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">o </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Data</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Migrations</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">IdentityServer</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">/</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">PersistedGrantDb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="扩展库" tabindex="-1"><a class="header-anchor" href="#扩展库"><span>扩展库</span></a></h4><h5 id="applicationdbcontext" tabindex="-1"><a class="header-anchor" href="#applicationdbcontext"><span>ApplicationDbContext</span></a></h5><figure><img src="'+h+`" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h4 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-migration InitialIdentityServerPersistedGrantDbMigration -c PersistedGrantDbContext -o </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/Migrations/IdentityServer/PersistedGrantDb </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-migration InitialIdentityServerConfigurationDbMigration -c ConfigurationDbContext -o </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/Migrations/IdentityServer/ConfigurationDb</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">add</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-migration AppDbMigration -c ApplicationDbContext -o </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Data</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">database</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -c PersistedGrantDbContext</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">database</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -c ConfigurationDbContext</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">update</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">-</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">database</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> -c ApplicationDbContext</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,13)]))}const g=s(l,[["render",p]]),c=JSON.parse('{"path":"/middleware/authorize/identityserver4/chijiuhuabiaoshuiming.html","title":"持久化表说明","lang":"zh-CN","frontmatter":{"title":"持久化表说明","lang":"zh-CN","date":"2022-05-02T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["middleware"],"tag":["无"],"filename":"chijiuhuabiaoshuiming","slug":"sv80q1","docsId":"44892889","description":"多个上下文：有两种类型的数据需要持久化到数据库中 官方自带上下文 ConfigurationDbContext 配置数据(资源、客户端、身份) image.png 生成迁移文件 PersistedGrantDbContext 使用中产生的操作数据(令牌、代码和用户授权信息) image.png 生成迁移文件 扩展库 ApplicationDbConte...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"持久化表说明\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1620442383916-8bb2f13d-a760-4c42-93cd-182f68a9ef45.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1620442413509-597667a4-cd08-49d7-8655-3a8a1ad86cab.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1620443537213-f303ba9e-d877-42fe-9aa6-30096b524b21.png\\"],\\"datePublished\\":\\"2022-05-02T00:00:00.000Z\\",\\"dateModified\\":\\"2024-02-16T05:03:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"],["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/middleware/authorize/identityserver4/chijiuhuabiaoshuiming.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"持久化表说明"}],["meta",{"property":"og:description","content":"多个上下文：有两种类型的数据需要持久化到数据库中 官方自带上下文 ConfigurationDbContext 配置数据(资源、客户端、身份) image.png 生成迁移文件 PersistedGrantDbContext 使用中产生的操作数据(令牌、代码和用户授权信息) image.png 生成迁移文件 扩展库 ApplicationDbConte..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1620442383916-8bb2f13d-a760-4c42-93cd-182f68a9ef45.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-16T05:03:06.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2022-05-02T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-16T05:03:06.000Z"}]]},"git":{"createdTime":1697724028000,"updatedTime":1708059786000,"contributors":[{"name":"azrng","username":"","email":"itzhangyunpeng@163.com","commits":2}]},"readingTime":{"minutes":0.61,"words":183},"filePathRelative":"middleware/authorize/identityserver4/chijiuhuabiaoshuiming.md","excerpt":"<p>多个上下文：有两种类型的数据需要持久化到数据库中</p>\\n<h4>官方自带上下文</h4>\\n<h5>ConfigurationDbContext</h5>\\n<p>配置数据(资源、客户端、身份)<br>\\n<img src=\\"/common/1620442383916-8bb2f13d-a760-4c42-93cd-182f68a9ef45.png\\" alt=\\"image.png\\" loading=\\"lazy\\"><br>\\n生成迁移文件</p>\\n<div class=\\"language-powershell line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"powershell\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-powershell\\"><span class=\\"line\\"><span style=\\"--shiki-light:#0184BC;--shiki-dark:#56B6C2\\">add-migration</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\"> InitialIdentityServerConfigurationDbMigration </span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">-</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">c ConfigurationDbContext </span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">-</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">o </span><span style=\\"--shiki-light:#A626A4;--shiki-dark:#C678DD\\">Data</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">/</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">Migrations</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">/</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">IdentityServer</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#56B6C2\\">/</span><span style=\\"--shiki-light:#383A42;--shiki-dark:#ABB2BF\\">ConfigurationDb</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{g as comp,c as data};

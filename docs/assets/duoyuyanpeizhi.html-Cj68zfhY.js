import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as e,o as t,c as o,a as n,d as p,e as c,b as l}from"./app-DMmdIwn0.js";const i="/kbms/common/1620743639094-5602d16d-4cbb-45d6-a7fb-6a36098f3fd2.png",r="/kbms/common/1620034709077-45121370-8b26-42a5-970c-ed5509b50720.png",u="/kbms/common/1620739094068-441806c6-1df0-4187-a8cf-44031e34942b.png",d="/kbms/common/1620739027856-d2b61f2f-08ff-4e39-bed0-66d618939e25.png",m="/kbms/common/1620739056710-32704399-15c8-4a13-88d9-1706658774d3.png",k={},h=l(`<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>支持多语言使网站可以覆盖更广泛的受众。 ASP.NET Core 提供的服务和中间件可将网站本地化为不同的语言。</p><blockquote><p>本次示例环境：vs2019、net5</p></blockquote><h2 id="方案" tabindex="-1"><a class="header-anchor" href="#方案"><span>方案</span></a></h2><ul><li>ResourcesPath文件实现</li><li>PO文件</li></ul><p>https://mp.weixin.qq.com/s/5pmT2aE9-Bxvy5m1ZBOKVw | 在ASP.NET Core 使用PO文件指定本地化</p><h2 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h2><blockquote><p>无需引用Nuget包即可实现以下功能。</p></blockquote><h3 id="注入容器" tabindex="-1"><a class="header-anchor" href="#注入容器"><span>注入容器</span></a></h3><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>services<span class="token punctuation">.</span><span class="token function">AddLocalization</span><span class="token punctuation">(</span>t <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    t<span class="token punctuation">.</span>ResourcesPath <span class="token operator">=</span> <span class="token string">&quot;Language&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启用配置" tabindex="-1"><a class="header-anchor" href="#启用配置"><span>启用配置</span></a></h3><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> supportedCultures <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>CultureInfo<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">new</span> <span class="token constructor-invocation class-name">CultureInfo</span><span class="token punctuation">(</span><span class="token string">&quot;zh-CN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">new</span> <span class="token constructor-invocation class-name">CultureInfo</span><span class="token punctuation">(</span><span class="token string">&quot;en-US&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">UseRequestLocalization</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestLocalizationOptions</span>
<span class="token punctuation">{</span>
	<span class="token comment">//这里指定默认语言包</span>
	DefaultRequestCulture <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestCulture</span><span class="token punctuation">(</span><span class="token string">&quot;en-US&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//为了测试配置默认语言英文</span>
	SupportedCultures <span class="token operator">=</span> supportedCultures<span class="token punctuation">,</span>
	SupportedUICultures <span class="token operator">=</span> supportedCultures
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="语言配置文件" tabindex="-1"><a class="header-anchor" href="#语言配置文件"><span>语言配置文件</span></a></h3><p>需要在根目录新建一个文件夹，文件夹名字就是ResourcesPath的名字。资源文件(resx结尾)存放路径需要和使用的地方目录结构一致。(右键文件夹&gt;添加&gt;新建项) <img src="`+i+'" alt="image.png" loading="lazy"></p><blockquote><p>语言包下的目录结构和MVC对应，控制器对应控制器，视图对应视图。资源文件命名方式为使用文件的文件名称加上语言代码。</p></blockquote><figure><img src="'+r+`" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h2 id="读取资源文件" tabindex="-1"><a class="header-anchor" href="#读取资源文件"><span>读取资源文件</span></a></h2><p>在控制器中使用，依赖注入资源文件</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiController</span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;[controller]&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ControllerBase</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IStringLocalizer<span class="token punctuation">&lt;</span>HomeController<span class="token punctuation">&gt;</span></span> _localizer<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">HomeController</span><span class="token punctuation">(</span><span class="token class-name">IStringLocalizer<span class="token punctuation">&lt;</span>HomeController<span class="token punctuation">&gt;</span></span> localizer<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _localizer <span class="token operator">=</span> localizer<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> _localizer<span class="token punctuation">[</span><span class="token string">&quot;succeed&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Value<span class="token punctuation">;</span><span class="token comment">//如果找不到succeed的本地化值，那么就返回字符串“succeed”</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span>测试</span></a></h2><p>有多种方法可以告诉程序需要使用哪一个语言文件，下面只说常见的使用，还支持自定义 。 默认输出 <img src="`+u+`" alt="image.png" loading="lazy"></p><h3 id="http报文" tabindex="-1"><a class="header-anchor" href="#http报文"><span>HTTP报文</span></a></h3><p>和常见的请求一样添加Accept-Language请求头即可</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>Accept<span class="token operator">-</span>Language<span class="token punctuation">:</span>zh<span class="token operator">-</span>CN
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="`+d+`" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie"><span>Cookie</span></a></h3><p>默认使用cookie名称.AspNetCore.Culture，值是</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>c<span class="token operator">=</span>zh<span class="token operator">-</span>CN<span class="token operator">|</span>uic<span class="token operator">=</span>zh<span class="token operator">-</span><span class="token class-name">CN</span>
c<span class="token operator">=</span>zh<span class="token operator">-</span><span class="token class-name">CN</span>
uic<span class="token operator">=</span>zh<span class="token operator">-</span>CN
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>c是Culture，uic是UICulture</p></blockquote><h3 id="url参数" tabindex="-1"><a class="header-anchor" href="#url参数"><span>URL参数</span></a></h3><p>三种写法，效果一样</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token punctuation">?</span>culture<span class="token operator">=</span>zh<span class="token operator">-</span>CN<span class="token operator">&amp;</span>ui<span class="token operator">-</span>culture<span class="token operator">=</span>zh<span class="token operator">-</span>CN
<span class="token punctuation">?</span>culture<span class="token operator">=</span>zh<span class="token operator">-</span>CN
<span class="token punctuation">?</span>ui<span class="token operator">-</span>culture<span class="token operator">=</span>zh<span class="token operator">-</span>CN
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+m+'" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h2 id="参考文档" tabindex="-1"><a class="header-anchor" href="#参考文档"><span>参考文档</span></a></h2>',34),g={href:"https://docs.microsoft.com/zh-cn/aspnet/core/fundamentals/localization?view=aspnetcore-5.0",target:"_blank",rel:"noopener noreferrer"};function v(b,f){const a=e("ExternalLinkIcon");return t(),o("div",null,[h,n("blockquote",null,[n("p",null,[n("a",g,[p("https://docs.microsoft.com/zh-cn/aspnet/core/fundamentals/localization?view=aspnetcore-5.0"),c(a)])])])])}const C=s(k,[["render",v],["__file","duoyuyanpeizhi.html.vue"]]),q=JSON.parse('{"path":"/dotnet/duoyuyanpeizhi.html","title":"多语言配置","lang":"zh-CN","frontmatter":{"title":"多语言配置","lang":"zh-CN","date":"2023-07-14T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dotNET"],"tag":["无"],"filename":"duoyuyanpeizhi","slug":"qwhyla","docsId":"44684104","description":"概述 支持多语言使网站可以覆盖更广泛的受众。 ASP.NET Core 提供的服务和中间件可将网站本地化为不同的语言。 本次示例环境：vs2019、net5 方案 ResourcesPath文件实现 PO文件 https://mp.weixin.qq.com/s/5pmT2aE9-Bxvy5m1ZBOKVw | 在ASP.NET Core 使用PO文件...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dotnet/duoyuyanpeizhi.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"多语言配置"}],["meta",{"property":"og:description","content":"概述 支持多语言使网站可以覆盖更广泛的受众。 ASP.NET Core 提供的服务和中间件可将网站本地化为不同的语言。 本次示例环境：vs2019、net5 方案 ResourcesPath文件实现 PO文件 https://mp.weixin.qq.com/s/5pmT2aE9-Bxvy5m1ZBOKVw | 在ASP.NET Core 使用PO文件..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1620743639094-5602d16d-4cbb-45d6-a7fb-6a36098f3fd2.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-12-17T11:24:33.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2023-07-14T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-12-17T11:24:33.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"多语言配置\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1620743639094-5602d16d-4cbb-45d6-a7fb-6a36098f3fd2.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1620034709077-45121370-8b26-42a5-970c-ed5509b50720.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1620739094068-441806c6-1df0-4187-a8cf-44031e34942b.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1620739027856-d2b61f2f-08ff-4e39-bed0-66d618939e25.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1620739056710-32704399-15c8-4a13-88d9-1706658774d3.png\\"],\\"datePublished\\":\\"2023-07-14T00:00:00.000Z\\",\\"dateModified\\":\\"2023-12-17T11:24:33.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"方案","slug":"方案","link":"#方案","children":[]},{"level":2,"title":"配置","slug":"配置","link":"#配置","children":[{"level":3,"title":"注入容器","slug":"注入容器","link":"#注入容器","children":[]},{"level":3,"title":"启用配置","slug":"启用配置","link":"#启用配置","children":[]},{"level":3,"title":"语言配置文件","slug":"语言配置文件","link":"#语言配置文件","children":[]}]},{"level":2,"title":"读取资源文件","slug":"读取资源文件","link":"#读取资源文件","children":[]},{"level":2,"title":"测试","slug":"测试","link":"#测试","children":[{"level":3,"title":"HTTP报文","slug":"http报文","link":"#http报文","children":[]},{"level":3,"title":"Cookie","slug":"cookie","link":"#cookie","children":[]},{"level":3,"title":"URL参数","slug":"url参数","link":"#url参数","children":[]}]},{"level":2,"title":"参考文档","slug":"参考文档","link":"#参考文档","children":[]}],"git":{"createdTime":1697962303000,"updatedTime":1702812273000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1},{"name":"zhangyunpeng","email":"zhang.yunpeng@synyi.com","commits":1}]},"readingTime":{"minutes":1.82,"words":546},"filePathRelative":"dotnet/duoyuyanpeizhi.md","localizedDate":"2023年7月14日","excerpt":"<h2>概述</h2>\\n<p>支持多语言使网站可以覆盖更广泛的受众。&nbsp;ASP.NET Core 提供的服务和中间件可将网站本地化为不同的语言。</p>\\n<blockquote>\\n<p>本次示例环境：vs2019、net5</p>\\n</blockquote>\\n<h2>方案</h2>\\n<ul>\\n<li>ResourcesPath文件实现</li>\\n<li>PO文件</li>\\n</ul>\\n<p>https://mp.weixin.qq.com/s/5pmT2aE9-Bxvy5m1ZBOKVw | 在ASP.NET Core 使用PO文件指定本地化</p>\\n<h2>配置</h2>\\n<blockquote>\\n<p>无需引用Nuget包即可实现以下功能。</p>\\n</blockquote>","autoDesc":true}');export{C as comp,q as data};

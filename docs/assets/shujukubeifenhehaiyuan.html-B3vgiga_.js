import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as a,d as n}from"./app-CX6H2AQa.js";const l="/kbms/common/1614064979468-5132c0c8-13c7-4670-ac35-dcea2cf8839d.png",h={},k=n(`<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>1、一般情况下，数据库备份导出的是一个脚本文件，这个脚本文件里面包含了用户名称以及表空间名称；所以如果备份时候要创建相同的表空间和用户名称。 举例说明，比如使用的客户端是sqldeveloper，那么就是用上面工具里面的导出按钮进行导出成一个脚本文件。 2、需要注意查看原数据库用户名、密码、服务器名称、所属表空间、所属临时表空间</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">先查看源数据库是属于哪个表空间等等，然后导出为dmp格式，还原数据库时候需要先创建数据库，创建数据库是使用Database </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">Configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> Assistant工具进行创建数据库，然后使用cmd去连接数据库</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">sqlplus 全局数据库名</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">命令  </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> sysdba</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">创建表空间：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">如果放在一个文件夹中，那么这个文件夹必须提前先创建好</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> tablespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 表空间名称</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> datafile </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;F:\\HYInstitute\\HYINSTITUTE.DBF&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 1000M autoExtend </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">然后创建临时表空间</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> temporary tablespace CCEN_TMP  tempfile </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;E:\\app\\Administrator\\admin\\tablespace_tmp\\CCEN_temp.dbf&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> size</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  1000M autoExtend </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">创建用户：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> USER</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> 用户名</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 口令 </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> TABLESPACE  表空间名称;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">或者</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> USER</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> DYZHCSYKT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">  IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">BY</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> DYZHCSYKT </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> tablespace CCEN temporary tablespace CCEN_TMP;  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">给用户赋权限：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">grant</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> connect</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">resource</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,dba </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">to</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> 用户名;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">最后打开第三方客户端，然后使用系统用户名称、口令等进行连接，然后运行备份的dmp文件。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">打开cmd运行框，运行</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">imp tianzhi_smart</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">tianzhi_smart</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">@192</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">168</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">129</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1521</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">orclfile</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;E:\\tianzhi_smart.dmp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> full</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">y;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>常用的数据库复制方法是利用工具实现源数据库到目标数据库，不导出来脚本。 遇到问题： 1.如果a服务器连接了一个内部服务器b，而c想要从b服务器数据库复制数据，但是c连接b时候连接失败不能连接，那么可以用a去连接b，主机ip是b的，然后使用c去连接a，主机ip是a的。但是这种方法显示操作一直出错了，忘了之前是咋操作了</p><h2 id="冷备份与冷恢复" tabindex="-1"><a class="header-anchor" href="#冷备份与冷恢复"><span>冷备份与冷恢复</span></a></h2><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">. 复制旧的数据库文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) 用SQLPlus连接数据库:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">sqlplus 用户名</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">密码 </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> sysdba</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) 关闭DB ：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">shutdown</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> immediate</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">；</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) 复制文件到其他地方存储实现备份</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">）复制三个文件夹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">admin</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">；</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">oradata(datafile， controlfile，redo【注：数据文件， 控制文件，redo】)；</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">flash_recovery_area三个文件夹。</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">）dbhome_1下的内容</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">database</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(PWDfile、pfile)；</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">dbs(spfile)；</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">NETWORK</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">ADMIN</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">listener</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">ora</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">、</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">tnsnames</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">ora</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">. Oracle重新建库恢复</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">（</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">）创建一个和原来一样的数据库。(安装路径和数据库名必须和原来一致)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">（</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">）停止数据库shutdown </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">immediate</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">；</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">（</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">）复制安装目录下的admin、oradata、flash_recovery_area覆盖，复制database(PWDfile、pfile) 覆盖</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">（</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">）启动数据库 startup;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">备注：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">无归档模式：将备份文件拷贝回原来的目录即可，然后启动数据库。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">归档模式：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">①将数据文件、控制文件拷贝回原来目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">②</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">SQL</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">startup mount;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">SQL</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">recover </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">database</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> using</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> backup</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> controlfile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">③将相应的归档日志和联机日志拖到CMD命令窗口进行跑日志。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">④</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">SQL</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">alter</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> database</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> resetlogs;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">. 软件重装恢复</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">此时，操作系统重装，如果做冷备恢复，要保证相同操作系统，相同的数据库版本。形势如同异机恢复。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">A、不创建实例：（源机上的数据库名字为orcl）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) 恢复oradata</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">orcl目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">在目标机上的oradata目录下建立orcl文件夹，然后进行数据覆盖。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">包括数据文件、参数文件、控制文件、日志文件、pwd文件，放在与原系统相同的目录。如果目录有所改变，则需要另外建立控制文件，修改pfile。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) 恢复admin</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">orcl目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">在目标机上的admin目录下建立orcl文件夹，然后在orcl里面再建立adump、bdump、cdump、udump、dpdump、pfile六个文件夹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) 建立服务</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">把源机的密码文件拷贝到目标机的database目录下。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">使用oradim命令在cmd下oradim </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">new </span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">sid</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> orcl 表示建立一个服务，sid为orcl（最好名字和源机备份的数据库名字一致，就不需要重建密码文件）。如果是在linux下，不需要此步。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) 重建创建参数文件、控制文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">拷贝源机的pfile到目标机的一个目录下，修改pfile里面相关文件的路径。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">然后通过SQL</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> spfile </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> pfile</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">‘文件路径</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;来创建参数文件。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">重建控制文件命令：SQL&gt;alter database backup controlfile to trace;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">然后会在udump文件夹下产生一个追踪文件，打开文件找到如下一段，复制到文本中，修改相应路径然后保存为:createctl.sql文件（sql脚本文件），复制到目标机上。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">注意：SQL&gt;alter database backup controlfile to trace as &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">F:</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">DB_RECOVERY</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">CONTROL_FILE_TRACE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">TXT</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">复制的原始导出txt中的，相应代码片段如下:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">STARTUP NOMOUNT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">CREATE CONTROLFILE REUSE DATABASE &quot;ORCL&quot; NORESETLOGS  ARCHIVELOG</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXLOGFILES 16</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXLOGMEMBERS 3</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXDATAFILES 100</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXINSTANCES 8</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXLOGHISTORY 292</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">LOGFILE</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  GROUP 1 &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">REDO01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">LOG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; SIZE 50M BLOCKSIZE 512,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  GROUP 2 &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">REDO02</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">LOG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; SIZE 50M BLOCKSIZE 512,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  GROUP 3 &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">REDO03</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">LOG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; SIZE 50M BLOCKSIZE 512</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">-- STANDBY LOGFILE</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">DATAFILE</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">SYSTEM01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">SYSAUX01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">UNDOTBS01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">USERS01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">EXAMPLE01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">YTQ</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\ZJHH</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\PRODUCT\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">\\DBHOME_1\\</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DATABASE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">\\SDE_TBS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">I:\\ZJECMS\\DB\\DB_BK_DATA\\RMAN_LOCAL_1805\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">RMAN_BKUP_1805</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">CHARACTER SET ZHS16GBK</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(5)  数据库设置SID和启动服务</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">c:</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">set ORACLE_SID=orcl</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">c:</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">sqlplus &quot;/as   sysdba&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SQL&gt;create spfile from pfile=&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">c:\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">pfile</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">txt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SQL&gt;@c:</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">reatectl.sql;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SQL&gt;shutdown   immediate;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SQL&gt;startup;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SQL&gt;alter database open resetlogs;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">备注：</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">如果（4）、（5）不好用，可以用下面的方法修改这些路径不一致的问题（反正笔者电脑上冷备份恢复时，上面的两个步骤就不好用）：</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">1）SQL&gt;下执行如下语句，恢复控制文件</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">STARTUP NOMOUNT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">CREATE CONTROLFILE REUSE DATABASE &quot;ORCL&quot; NORESETLOGS  ARCHIVELOG</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXLOGFILES 16</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXLOGMEMBERS 3</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXDATAFILES 100</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXINSTANCES 8</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">    MAXLOGHISTORY 292</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">2）修改日志、DBF的路径</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">REDO01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">LOG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">REDO01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">LOG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">REDO02</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">LOG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">REDO02</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">LOG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">  alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">REDO03</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">LOG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">REDO03</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">LOG</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">SYSTEM01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">SYSTEM01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">SYSAUX01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">SYSAUX01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">UNDOTBS01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">UNDOTBS01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">USERS01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to  &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">USERS01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">EXAMPLE01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to  &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">EXAMPLE01</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">YTQ</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">YTQ</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\ORADATA\\ORCL\\ZJHH</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\ZJHH</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\APP\\ADMINISTRATOR\\PRODUCT\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">\\DBHOME_1\\</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">DATABASE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">\\SDE_TBS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\SDE_TBS</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> alter database rename file &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">I:\\ZJECMS\\DB\\DB_BK_DATA\\RMAN_LOCAL_1805\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">RMAN_BKUP_1805</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39; to &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">E:\\IDEPROS\\oracle_home\\oradata\\orcl\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">RMAN_BKUP_1805</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">DBF</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(6) TNSNAMES设置</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">在network</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">dmin下的tnsnames.ora中添加如下片段</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ORCL =</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(DESCRIPTION   =</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(ADDRESS_LIST   =</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(ADDRESS   = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521))</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(CONNECT_DATA   =</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(SERVICE_NAME   = orcl)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(7) 建立监听</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">用net configuration为orcl实例新建监听</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">至此，冷备份恢复成功。即使你现在用oem打开数据库时发现提示找不到sid ，但实际上你已经成功了，此时只需要重启一下的你的服务器就可以。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">B、创建实例方式（实例SID与源机数据库SID一致）</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(1) 替换和覆盖oradata</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">rcl目录</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">删除目标机的oradata</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">rcl底下的所有文件，把源机的所有data文件、redo文件拷贝到此目录下</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(2) 密码文件覆盖</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">删除目标机的密码文件，拷贝源机密码文件到目标机下。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(3) 控制文件恢复</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">在源机上重建目标机的控制文件：SQL&gt;alter database backup controlfile to trace;然后会在udump文件夹下产生一个追踪文件，打开文件找到上面那段，复制到文本中，修改相应路径然后保存为:createctl.sql文件（sql脚本文件），复制到目标机上。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">复制代码代码如下:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">c:</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">sqlplus &quot;/as   sysdba&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SQL&gt;@c:</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\c</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">reatectl.sql;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SQL&gt;shutdown   immediate;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SQL&gt;startup;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">SQL&gt;alter database open resetlogs;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(4)  在network</span><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">\\a</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">dmin下的tnsnames.ora中添加如下片段</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">复制代码代码如下:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">ORCL =</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(DESCRIPTION   =</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(ADDRESS_LIST   =</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(ADDRESS   = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521))</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(CONNECT_DATA   =</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(SERVICE_NAME   = orcl)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">(5) 用net configuration为orcl实例新建监听</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="expdp和impdp" tabindex="-1"><a class="header-anchor" href="#expdp和impdp"><span>EXPDP和IMPDP</span></a></h2><p>注意： EXP和IMP是客户段工具程序，它们既可以在客户端使用，也可以在服务器段使用。 EXPDP和IMPDP是服务端的工具程序，他们只能在ORACLE服务端使用，不能在客户端使用 IMP只适用于EXP导出文件，不适用于EXPDP导出文件;IMPDP只适用于EXPDP导出文件，而不适用于EXP导出文件。   expdp会把空表也导出，虽然还没有分配segment exp是找不到没有分配segment的表     在之前Oracle进行数据库迁移时候是使用的imp、exp进行导入导出的，但是后来推出了expdp 两个的差别是expdp会把空表也导出，虽然还没有分配segment，exp是找不到没有分配segment的表，所以在导出有些数据库的情况下，该数据库导出的dmp文件中不包含空的数据库表，所以需要使用expdp的方式进行导出， 首先在cmd运行下面的导出命令，然后等待结束后会发现在下图中多了一些文件 导出的语句中不需要指定导出目录 <img src="`+l+`" alt="image.png" loading="lazy"> 然后拷贝整个文件夹到需要还原的服务器放入指定的文件夹中（两个服务器需要安装相同版本的软件，创建相同的数据库名称、表名称、用户名称等），然后运行下面的语句进行导入数据库，导入成功即可。       操作示例：DYZHCSYKT是用户名也是该用户的密码，ORABUSONLINE 是数据库名称，schemas=(DYZHCSYKT)是需要导出的用户 导入：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">impdp DYZHCSYKT</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">DYZHCSYKT</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">@ORABUSONLINE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> dumpfile</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">EXP_%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%.DMP LOGFILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">EXP_%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%.</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> schemas</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(DYZHCSYKT)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">导出：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">expdp DYZHCSYKT</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">DYZHCSYKT</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">@ORABUSONLINE</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> dumpfile</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">EXP_%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%.DMP LOGFILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">EXP_%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%%</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">:~</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">%.</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> schemas</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(DYZHCSYKT)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其他参与资料：<a href="https://www.cnblogs.com/whsa/p/3975817.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/whsa/p/3975817.html</a></p>`,10),p=[k];function e(t,d){return a(),i("div",null,p)}const g=s(h,[["render",e],["__file","shujukubeifenhehaiyuan.html.vue"]]),A=JSON.parse(`{"path":"/dataBase/oracle/shujukubeifenhehaiyuan/shujukubeifenhehaiyuan.html","title":"数据库备份和还原","lang":"zh-CN","frontmatter":{"title":"数据库备份和还原","lang":"zh-CN","date":"2023-09-23T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dataBase"],"tag":["无"],"filename":"shujukubeifenhehaiyuan","slug":"tm2wb3","docsId":"31815651","description":"概述 1、一般情况下，数据库备份导出的是一个脚本文件，这个脚本文件里面包含了用户名称以及表空间名称；所以如果备份时候要创建相同的表空间和用户名称。 举例说明，比如使用的客户端是sqldeveloper，那么就是用上面工具里面的导出按钮进行导出成一个脚本文件。 2、需要注意查看原数据库用户名、密码、服务器名称、所属表空间、所属临时表空间 常用的数据库复制...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dataBase/oracle/shujukubeifenhehaiyuan/shujukubeifenhehaiyuan.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"数据库备份和还原"}],["meta",{"property":"og:description","content":"概述 1、一般情况下，数据库备份导出的是一个脚本文件，这个脚本文件里面包含了用户名称以及表空间名称；所以如果备份时候要创建相同的表空间和用户名称。 举例说明，比如使用的客户端是sqldeveloper，那么就是用上面工具里面的导出按钮进行导出成一个脚本文件。 2、需要注意查看原数据库用户名、密码、服务器名称、所属表空间、所属临时表空间 常用的数据库复制..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1614064979468-5132c0c8-13c7-4670-ac35-dcea2cf8839d.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-09-23T15:53:24.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2023-09-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-09-23T15:53:24.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"数据库备份和还原\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1614064979468-5132c0c8-13c7-4670-ac35-dcea2cf8839d.png\\"],\\"datePublished\\":\\"2023-09-23T00:00:00.000Z\\",\\"dateModified\\":\\"2023-09-23T15:53:24.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"冷备份与冷恢复","slug":"冷备份与冷恢复","link":"#冷备份与冷恢复","children":[]},{"level":2,"title":"EXPDP和IMPDP","slug":"expdp和impdp","link":"#expdp和impdp","children":[]}],"git":{"createdTime":1695484404000,"updatedTime":1695484404000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":8.6,"words":2580},"filePathRelative":"dataBase/oracle/shujukubeifenhehaiyuan/shujukubeifenhehaiyuan.md","localizedDate":"2023年9月23日","excerpt":"<h2>概述</h2>\\n<p>1、一般情况下，数据库备份导出的是一个脚本文件，这个脚本文件里面包含了用户名称以及表空间名称；所以如果备份时候要创建相同的表空间和用户名称。\\n举例说明，比如使用的客户端是sqldeveloper，那么就是用上面工具里面的导出按钮进行导出成一个脚本文件。\\n2、需要注意查看原数据库用户名、密码、服务器名称、所属表空间、所属临时表空间</p>\\n<div class=\\"language-sql line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"sql\\" data-title=\\"sql\\" style=\\"--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes github-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">先查看源数据库是属于哪个表空间等等，然后导出为dmp格式，还原数据库时候需要先创建数据库，创建数据库是使用Database </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">Configuration</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> Assistant工具进行创建数据库，然后使用cmd去连接数据库</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">sqlplus 全局数据库名</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">命令  </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">as</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> sysdba</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">创建表空间：</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">如果放在一个文件夹中，那么这个文件夹必须提前先创建好</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">create</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> tablespace</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\"> 表空间名称</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> datafile </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">'F:\\\\HYInstitute\\\\HYINSTITUTE.DBF'</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> size</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> 1000M autoExtend </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">on</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">然后创建临时表空间</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">create</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> temporary tablespace CCEN_TMP  tempfile </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">'E:\\\\app\\\\Administrator\\\\admin\\\\tablespace_tmp\\\\CCEN_temp.dbf'</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> size</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">  1000M autoExtend </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">on</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">创建用户：</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">CREATE</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> USER</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\"> 用户名</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> IDENTIFIED </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">BY</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> 口令 </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">DEFAULT</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> TABLESPACE  表空间名称;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">或者</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">CREATE</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> USER</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#61AFEF\\"> DYZHCSYKT</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">  IDENTIFIED </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">BY</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> DYZHCSYKT </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">DEFAULT</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> tablespace CCEN temporary tablespace CCEN_TMP;  </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">给用户赋权限：</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">grant</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\"> connect</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">resource</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">,dba </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#C678DD\\">to</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> 用户名;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">最后打开第三方客户端，然后使用系统用户名称、口令等进行连接，然后运行备份的dmp文件。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">打开cmd运行框，运行</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">imp tianzhi_smart</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">tianzhi_smart</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E06C75\\">@192</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\">168</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\">10</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">.</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\">129</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">:</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#D19A66\\">1521</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#ABB2BF\\">/</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">orclfile</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#98C379\\">'E:\\\\tianzhi_smart.dmp'</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\"> full</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#56B6C2\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#ABB2BF\\">y;</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{g as comp,A as data};

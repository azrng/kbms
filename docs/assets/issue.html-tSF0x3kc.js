import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as n,o as t,c as o,b as p,e as a,f as r,d as l}from"./app-D8HBJYTp.js";const i="/kbms/common/1609562353775-e3df218a-3e64-4a54-b05c-a4189cf8c036.png",c="/kbms/common/1609562353796-5e1ff8cd-3401-4ca7-83d0-284daabbbc8b.png",g={},d=l('<h2 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h2><p>托管方式： 进程外：IIS工作进程(w3wp.exe)托管 进程内：自托管web服务器(Kestrel)</p><figure><img src="'+i+'" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><figure><img src="'+c+`" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>如果使用swagger，切记一定要注意xml文档问题，很容易缺失导致出错。</p><h2 id="访问swagger提示404" tabindex="-1"><a class="header-anchor" href="#访问swagger提示404"><span>访问swagger提示404</span></a></h2><p>通常会在代码中限制ASPNETCORE_ENVIRONMENT为Production时关闭swagger。但是往往我们需要将api发布到本地iis调试或供他人使用时，swagger将会被禁止。发布后项目往往默认为Production环境，将其修改为Development即可解决。 解决办法： 打开发布好的项目，找到web.config文件，添加以下代码：</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token operator">&lt;</span>environmentVariables<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token class-name">environmentVariable</span> name<span class="token operator">=</span><span class="token string">&quot;ASPNETCORE_ENVIRONMENT&quot;</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">&quot;Development&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>environmentVariables<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改webconfig的大概结构是：</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token operator">&lt;</span><span class="token punctuation">?</span><span class="token class-name">xml</span> version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token class-name">location</span> path<span class="token operator">=</span><span class="token string">&quot;.&quot;</span> inheritInChildApplications<span class="token operator">=</span><span class="token string">&quot;false&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>system<span class="token punctuation">.</span>webServer<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>handlers<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token keyword">add</span> name<span class="token operator">=</span><span class="token string">&quot;aspNetCore&quot;</span> path<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> verb<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> modules<span class="token operator">=</span><span class="token string">&quot;AspNetCoreModuleV2&quot;</span> resourceType<span class="token operator">=</span><span class="token string">&quot;Unspecified&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>handlers<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token class-name">aspNetCore</span> processPath<span class="token operator">=</span><span class="token string">&quot;dotnet&quot;</span> arguments<span class="token operator">=</span><span class="token string">&quot;*.dll&quot;</span> stdoutLogEnabled<span class="token operator">=</span><span class="token string">&quot;false&quot;</span> stdoutLogFile<span class="token operator">=</span><span class="token string">&quot;.\\logs\\stdout&quot;</span> hostingModel<span class="token operator">=</span><span class="token string">&quot;InProcess&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>environmentVariables<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token class-name">environmentVariable</span> name<span class="token operator">=</span><span class="token string">&quot;ASPNETCORE_ENVIRONMENT&quot;</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">&quot;Development&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>environmentVariables<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>aspNetCore<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>system<span class="token punctuation">.</span>webServer<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>location<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ProjectGuid<span class="token punctuation">:</span> 15af0485<span class="token operator">-</span>b65a<span class="token operator">-</span>422a<span class="token operator">-</span>bf12<span class="token operator">-</span>5877b85abb6c<span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="hostingmodel" tabindex="-1"><a class="header-anchor" href="#hostingmodel"><span>hostingModel</span></a></h2><ul><li>在节点 system.webServer/aspNetCore.hostingModel 中，可以选择的值为：inprocess(进程内托管)/outofprocess(进程外托管)，通过设置 hostingModel 的值来选择不同的托管模式</li><li>进程内托管</li></ul><p>选择进程内托管，意味着将 .NetCore 应用程序的工作进程托管到 IIS 的工作进程 w3wp.exe 中，使用的 IIS 进程内服务器，即使用的是：IISHttpServer。</p><ul><li>进程外托管</li></ul><p>选择进程外托管时，web.config 配置节点system.webServer/aspNetCore.hostingModel 的值必须设置为：outofprocess，选择进程外托管，实际上就是告诉 IIS ，当前应用程序不使用 IISHttpServer，改为使用Kestrel 服务器</p><h2 id="an-error-occurred-while-starting-the-application" tabindex="-1"><a class="header-anchor" href="#an-error-occurred-while-starting-the-application"><span>An error occurred while starting the application</span></a></h2><p>项目已经可以启动，证明环境已经正常，只不过在项目启动的时候，出现了错误，也就是说是项目代码的问题。 解决办法： 查看日志，看项目文件是否齐全</p>`,17);function m(u,k){const s=n("aspNetCore");return t(),o("div",null,[d,p("p",null,[a("可以启用日志  "),r(s,{processPath:"dotnet",arguments:".\\TicketPlatform.Web.dll",stdoutLogEnabled:"true",stdoutLogFile:".\\logs\\"}),a(" 如果按照上面这种办法，那么记得创建logs文件夹")])])}const v=e(g,[["render",m],["__file","issue.html.vue"]]),f=JSON.parse('{"path":"/dotnet/buildAndRelease/release/iis/issue.html","title":"问题","lang":"zh-CN","frontmatter":{"title":"问题","lang":"zh-CN","date":"2021-01-02T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dotNET"],"tag":["无"],"filename":"anerroroccurredwhilestartingtheapplication","slug":"wvv9z3","docsId":"29455075","description":"部署 托管方式： 进程外：IIS工作进程(w3wp.exe)托管 进程内：自托管web服务器(Kestrel) image.pngimage.png image.pngimage.png 如果使用swagger，切记一定要注意xml文档问题，很容易缺失导致出错。 访问swagger提示404 通常会在代码中限制ASPNETCORE_ENVIRONMEN...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dotnet/buildAndRelease/release/iis/issue.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"问题"}],["meta",{"property":"og:description","content":"部署 托管方式： 进程外：IIS工作进程(w3wp.exe)托管 进程内：自托管web服务器(Kestrel) image.pngimage.png image.pngimage.png 如果使用swagger，切记一定要注意xml文档问题，很容易缺失导致出错。 访问swagger提示404 通常会在代码中限制ASPNETCORE_ENVIRONMEN..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1609562353775-e3df218a-3e64-4a54-b05c-a4189cf8c036.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-25T15:31:40.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2021-01-02T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-02-25T15:31:40.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"问题\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1609562353775-e3df218a-3e64-4a54-b05c-a4189cf8c036.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1609562353796-5e1ff8cd-3401-4ca7-83d0-284daabbbc8b.png\\"],\\"datePublished\\":\\"2021-01-02T00:00:00.000Z\\",\\"dateModified\\":\\"2024-02-25T15:31:40.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"部署","slug":"部署","link":"#部署","children":[]},{"level":2,"title":"访问swagger提示404","slug":"访问swagger提示404","link":"#访问swagger提示404","children":[]},{"level":2,"title":"hostingModel","slug":"hostingmodel","link":"#hostingmodel","children":[]},{"level":2,"title":"An error occurred while starting the application","slug":"an-error-occurred-while-starting-the-application","link":"#an-error-occurred-while-starting-the-application","children":[]}],"git":{"createdTime":1708875100000,"updatedTime":1708875100000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":1.76,"words":529},"filePathRelative":"dotnet/buildAndRelease/release/iis/issue.md","localizedDate":"2021年1月2日","excerpt":"<h2>部署</h2>\\n<p>托管方式：\\n进程外：IIS工作进程(w3wp.exe)托管\\n进程内：自托管web服务器(Kestrel)</p>\\n<figure><img src=\\"/common/1609562353775-e3df218a-3e64-4a54-b05c-a4189cf8c036.png\\" alt=\\"image.png\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>image.png</figcaption></figure>\\n<figure><img src=\\"/common/1609562353796-5e1ff8cd-3401-4ca7-83d0-284daabbbc8b.png\\" alt=\\"image.png\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>image.png</figcaption></figure>","autoDesc":true}');export{v as comp,f as data};

import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as p,o as r,c,b as n,e as s,f as e,d as t}from"./app-D8HBJYTp.js";const l="/kbms/soft/a5ef7ca6bc7842419734f7f403946d62.png",i="/kbms/soft/b75760d1815c4512adbf2ff69dc18265.png",u="/kbms/soft/e1a777ed966749399b6075b8497b464b.png",d="/kbms/soft/18e098d9e5704f949b2c17d3cb65d553.png",m="/kbms/soft/d2d7bb6e27e14bd2803e904e59a33ed1.png",k="/kbms/soft/b2d7ba1bf55d43a6b9ac1fb9f4f94f02.png",b="/kbms/soft/a38c174edc274fef89b79cbd412b1d78.png",g="/kbms/soft/a7bbf3581f14433497885edf1a7c05fb.png",v="/kbms/soft/88a0224156124d62b0eff11ad046188a.png",h="/kbms/soft/1408d9b04f8d4e0d81d3013e6533ec2e.png",f="/kbms/soft/f6e3c303aa0e40cdbe705e588ebf9ee7.png",_="/kbms/soft/1bef194077a448a38888fdd1ba4c6d46.png",y="/kbms/soft/01c8f09ff60e42afa1c0107bf3136e18.png",x="/kbms/soft/9f7b37829273485781ba11ed142f1401.png",z="/kbms/soft/4e957a61a6b344cdb6b661a3321c198f.png",w="/kbms/soft/5d181ac981d34ddca81c5b908beb18b6.png",N="/kbms/soft/2a1ab5af57174058a234806d03399f5c.png",P="/kbms/soft/a965f6e35c7a417fb45d584fcedb1ff2.png",T="/kbms/soft/43bbbc5490c342d6842b9ef485c6190e.png",A="/kbms/soft/fa0f036049a1452492ae4d30663d8457.png",q="/kbms/soft/7f832b36c926435d9c64bcbe3eef875e.png",C="/kbms/soft/e4f53d2010424875a277b8a96045923c.png",G="/kbms/soft/edb085bca1b04448a2ce3959c1d3b59c.png",O={},S=n("h2",{id:"工具介绍",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#工具介绍"},[n("span",null,"工具介绍")])],-1),E={href:"https://www.aiwanyun.cn/archives/174",target:"_blank",rel:"noopener noreferrer"},j=t('<p>Prometheus、Grafana、Node Exporter 和Alertmanager是一组用于监控和可视化系统性能的开源工具。它们通常一起使用，形成一个强大的完整的监控和告警系统。 一般来说，这四个工具一起协作，形成了一个完整的监控和告警系统。Node Exporter用于收集主机级别的指标(本文暂未使用)，Prometheus存储和查询这些指标，Grafana提供可视化界面，而Alertmanager则负责管理和发送告警。整个系统的目标是帮助管理员和开发人员实时了解系统的状态、性能和健康状况，并在必要时采取措施。</p><h3 id="prometheus" tabindex="-1"><a class="header-anchor" href="#prometheus"><span>Prometheus</span></a></h3><p>Prometheus 是一种开源的系统监控和警报工具。它最初由 SoundCloud 开发，并成为 Cloud Native Computing Foundation（CNCF）的一部分。Prometheus 支持多维度的数据模型和强大的查询语言，使得用户可以轻松地收集和查询各种类型的监控数据。</p><h3 id="grafana" tabindex="-1"><a class="header-anchor" href="#grafana"><span>Grafana</span></a></h3><p>Grafana 是一个开源的数据可视化和监控平台。它提供了丰富的图表和仪表盘，可以将各种数据源的信息可视化展示。Grafana 支持多个数据源，包括 Prometheus、Graphite、InfluxDB 等，因此可以与各种监控系统集成，提供灵活且强大的可视化功能。</p><h3 id="alertmanager" tabindex="-1"><a class="header-anchor" href="#alertmanager"><span>Alertmanager</span></a></h3><p>Alertmanager 是 Prometheus 生态系统中的一个组件，负责处理和管理告警。当 Prometheus 检测到异常或达到某个预定的阈值时，它将生成告警并将其发送到 Alertmanager。Alertmanager 可以进行静默、分组、抑制和路由告警，并将它们发送到不同的接收端，如电子邮件、Slack 等</p><h2 id="netcore项目准备" tabindex="-1"><a class="header-anchor" href="#netcore项目准备"><span>.NetCore项目准备</span></a></h2>',8),Z={href:"https://gitee.com/AZRNG/my-example",target:"_blank",rel:"noopener noreferrer"},M=t(`<div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token operator">&lt;</span><span class="token class-name">PackageReference</span> Include<span class="token operator">=</span><span class="token string">&quot;OpenTelemetry.Exporter.Prometheus.AspNetCore&quot;</span> Version<span class="token operator">=</span><span class="token string">&quot;1.7.0-alpha.1&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token class-name">PackageReference</span> Include<span class="token operator">=</span><span class="token string">&quot;OpenTelemetry.Extensions.Hosting&quot;</span> Version<span class="token operator">=</span><span class="token string">&quot;1.7.0&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后就可以注入服务，这里只是举例操作</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>services<span class="token punctuation">.</span><span class="token function">AddOpenTelemetry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">WithMetrics</span><span class="token punctuation">(</span>builder <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            builder<span class="token punctuation">.</span><span class="token function">AddPrometheusExporter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            builder<span class="token punctuation">.</span><span class="token function">AddMeter</span><span class="token punctuation">(</span><span class="token string">&quot;Microsoft.AspNetCore.Hosting&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Microsoft.AspNetCore.Server.Kestrel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后记得要使用服务</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>app<span class="token punctuation">.</span><span class="token function">MapPrometheusScrapingEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>启动项目后访问 ip+ metrics访问页面 <img src="`+l+`" alt="image.png" loading="lazy"> 然后将该示例项目使用docker部署到服务器上 ，如果要使用该示例项目，记得切换分支到develop，将项目拉取到服务器，然后进入项目目录，执行命令去生成容器</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>sudo docker<span class="token operator">-</span>compose up <span class="token operator">-</span>d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7),I=n("img",{src:i,alt:"image.png",loading:"lazy"},null,-1),R={href:"http://192.168.82.163:8001/metrics",target:"_blank",rel:"noopener noreferrer"},V=n("img",{src:u,alt:"image.png",loading:"lazy"},null,-1),B=n("h2",{id:"安装监控和可视化程序",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#安装监控和可视化程序"},[n("span",null,"安装监控和可视化程序")])],-1),D=n("img",{src:d,alt:"image.png",loading:"lazy"},null,-1),$={href:"https://gitee.com/AZRNG/common-docker-yaml",target:"_blank",rel:"noopener noreferrer"},F=t(`<h3 id="安装prometheus" tabindex="-1"><a class="header-anchor" href="#安装prometheus"><span>安装Prometheus</span></a></h3><p>因为这里我只是用于做demo演示效果，所以我并没有取考虑挂在的问题，生产环境使用记得挂载数据</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>version<span class="token punctuation">:</span> <span class="token char">&#39;3&#39;</span>

services<span class="token punctuation">:</span>
  prometheus<span class="token punctuation">:</span> ## 访问：http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">9090</span><span class="token operator">/</span><span class="token class-name">targets</span>
   image<span class="token punctuation">:</span> prom<span class="token operator">/</span>prometheus<span class="token punctuation">:</span>v2<span class="token punctuation">.</span><span class="token number">37.6</span>
   container_name<span class="token punctuation">:</span> <span class="token class-name">prometheus</span> 
   command<span class="token punctuation">:</span>
     <span class="token operator">-</span> &#39;<span class="token operator">--</span>config<span class="token punctuation">.</span>file<span class="token operator">=</span><span class="token operator">/</span>etc<span class="token operator">/</span>prometheus<span class="token operator">/</span>prometheus<span class="token punctuation">.</span>yml&#39;
     <span class="token operator">-</span> &#39;<span class="token operator">--</span>storage<span class="token punctuation">.</span>tsdb<span class="token punctuation">.</span>path<span class="token operator">=</span><span class="token operator">/</span>prometheus&#39;
     <span class="token operator">-</span> &#39;<span class="token operator">--</span>web<span class="token punctuation">.</span>console<span class="token punctuation">.</span>libraries<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>prometheus<span class="token operator">/</span>console_libraries&#39;
     <span class="token operator">-</span> &#39;<span class="token operator">--</span>web<span class="token punctuation">.</span>console<span class="token punctuation">.</span>templates<span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>prometheus<span class="token operator">/</span>consoles&#39;
     <span class="token operator">-</span> &#39;<span class="token operator">--</span>web<span class="token punctuation">.</span>external<span class="token operator">-</span>url<span class="token operator">=</span>http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">9090</span><span class="token operator">/</span>&#39;
     <span class="token operator">-</span> &#39;<span class="token operator">--</span>web<span class="token punctuation">.</span>enable<span class="token operator">-</span>lifecycle&#39;
     <span class="token operator">-</span> &#39;<span class="token operator">--</span>storage<span class="token punctuation">.</span>tsdb<span class="token punctuation">.</span>retention<span class="token operator">=</span><span class="token number">15d</span>&#39;
   volumes<span class="token punctuation">:</span>
     <span class="token preprocessor property">#- /etc/localtime:/etc/localtime:ro</span>
     <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span>config<span class="token operator">/</span>prometheus<span class="token operator">/</span><span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>prometheus<span class="token operator">/</span>
     <span class="token preprocessor property">#- ./data/prometheus:/prometheus</span>
   ports<span class="token punctuation">:</span>
     <span class="token operator">-</span> <span class="token number">9090</span><span class="token punctuation">:</span><span class="token number">9090</span>
   links<span class="token punctuation">:</span>
     <span class="token operator">-</span> alertmanager<span class="token punctuation">:</span><span class="token class-name">alertmanager</span>

  alertmanager<span class="token punctuation">:</span> ## 告警服务
   image<span class="token punctuation">:</span> prom<span class="token operator">/</span>alertmanager<span class="token punctuation">:</span>v0<span class="token punctuation">.</span><span class="token number">25.0</span>
   container_name<span class="token punctuation">:</span> <span class="token class-name">alertmanager</span>
   ports<span class="token punctuation">:</span>
     <span class="token operator">-</span> <span class="token number">9093</span><span class="token punctuation">:</span><span class="token number">9093</span>
   volumes<span class="token punctuation">:</span>
    <span class="token preprocessor property">##  - /etc/localtime:/etc/localtime:ro</span>
     <span class="token operator">-</span> <span class="token punctuation">.</span><span class="token operator">/</span>config<span class="token operator">/</span>prometheus<span class="token operator">/</span><span class="token punctuation">:</span><span class="token operator">/</span>etc<span class="token operator">/</span>alertmanager<span class="token operator">/</span>
   command<span class="token punctuation">:</span>
     <span class="token operator">-</span> &#39;<span class="token operator">--</span>config<span class="token punctuation">.</span>file<span class="token operator">=</span><span class="token operator">/</span>etc<span class="token operator">/</span>alertmanager<span class="token operator">/</span>alertmanager<span class="token punctuation">.</span>yml&#39;
     <span class="token operator">-</span> &#39;<span class="token operator">--</span>storage<span class="token punctuation">.</span>path<span class="token operator">=</span><span class="token operator">/</span>alertmanager&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关于prometheus.yml内容如下</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token preprocessor property">## 全局配置</span>
<span class="token keyword">global</span><span class="token punctuation">:</span>
  scrape_interval<span class="token punctuation">:</span> 15s
  evaluation_interval<span class="token punctuation">:</span> 15s
  <span class="token preprocessor property">## scrape_timeout is set to the global default (</span><span class="token type-expression class-name">10s</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token preprocessor property">## 告警配置</span>
alerting<span class="token punctuation">:</span>
  alertmanagers<span class="token punctuation">:</span>
    <span class="token operator">-</span> static_configs<span class="token punctuation">:</span>
        <span class="token operator">-</span> targets<span class="token punctuation">:</span> <span class="token punctuation">[</span>&#39;localhost<span class="token punctuation">:</span><span class="token number">9093</span>&#39;<span class="token punctuation">]</span>
<span class="token preprocessor property">## 加载一次规则，并根据全局“评估间隔”定期评估它们。</span>
rule_files<span class="token punctuation">:</span>
  <span class="token operator">-</span> <span class="token string">&quot;/config/rules.yml&quot;</span>
<span class="token preprocessor property">## 控制Prometheus监视哪些资源</span>
<span class="token preprocessor property">## 默认配置中，有一个名为prometheus的作业，它会收集Prometheus服务器公开的时间序列数据。</span>
scrape_configs<span class="token punctuation">:</span>
  <span class="token preprocessor property">## 作业名称将作为标签“job=&lt;job_name&gt;\`添加到此配置中获取的任何数据。</span>
  <span class="token operator">-</span> job_name<span class="token punctuation">:</span> &#39;prometheus&#39;
    static_configs<span class="token punctuation">:</span>
      <span class="token operator">-</span> targets<span class="token punctuation">:</span> <span class="token punctuation">[</span>&#39;localhost<span class="token punctuation">:</span><span class="token number">9090</span>&#39;<span class="token punctuation">]</span>
  <span class="token operator">-</span> job_name<span class="token punctuation">:</span> &#39;node&#39; ## <span class="token punctuation">.</span>NetCore服务地址
    static_configs<span class="token punctuation">:</span>
      <span class="token operator">-</span> targets<span class="token punctuation">:</span> <span class="token punctuation">[</span>&#39;localhost<span class="token punctuation">:</span><span class="token number">9100</span>&#39;<span class="token punctuation">]</span>
        labels<span class="token punctuation">:</span>
          env<span class="token punctuation">:</span> <span class="token class-name">dev</span>
          role<span class="token punctuation">:</span> docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>alertmanager.yml文件，我并没有做配置，暂时搞了一个默认的</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token keyword">global</span><span class="token punctuation">:</span>
  resolve_timeout<span class="token punctuation">:</span> <span class="token number">5m</span>
  smtp_smarthost<span class="token punctuation">:</span> &#39;xxx@xxx<span class="token punctuation">:</span><span class="token number">587</span>&#39;
  smtp_from<span class="token punctuation">:</span> &#39;zhaoysz@xxx&#39;
  smtp_auth_username<span class="token punctuation">:</span> &#39;xxx@xxx&#39;
  smtp_auth_password<span class="token punctuation">:</span> &#39;xxxx&#39;
  smtp_require_tls<span class="token punctuation">:</span> <span class="token class-name">true</span>
route<span class="token punctuation">:</span>
  group_by<span class="token punctuation">:</span> <span class="token punctuation">[</span>&#39;alertname&#39;<span class="token punctuation">]</span>
  group_wait<span class="token punctuation">:</span> 10s
  group_interval<span class="token punctuation">:</span> 10s
  repeat_interval<span class="token punctuation">:</span> 1h
  receiver<span class="token punctuation">:</span> &#39;test<span class="token operator">-</span>mails&#39;
receivers<span class="token punctuation">:</span>
<span class="token operator">-</span> name<span class="token punctuation">:</span> &#39;test<span class="token operator">-</span>mails&#39;
  email_configs<span class="token punctuation">:</span>
  <span class="token operator">-</span> to<span class="token punctuation">:</span> &#39;scottcho@qq<span class="token punctuation">.</span>com&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>rule.yml文件内容如下</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>groups<span class="token punctuation">:</span>
<span class="token operator">-</span> name<span class="token punctuation">:</span> <span class="token class-name">example</span>
  rules<span class="token punctuation">:</span>
 <span class="token preprocessor property">## Alert for any instance that is unreachable for &gt;5 minutes.</span>
  <span class="token operator">-</span> alert<span class="token punctuation">:</span> <span class="token class-name">InstanceDown</span>
    expr<span class="token punctuation">:</span> up <span class="token operator">==</span> <span class="token number">0</span>
    <span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token number">1m</span>
    labels<span class="token punctuation">:</span>
      serverity<span class="token punctuation">:</span> <span class="token class-name">page</span>
    annotations<span class="token punctuation">:</span>
      summary<span class="token punctuation">:</span> <span class="token string">&quot;Instance {{ $labels.instance }} down&quot;</span>
      description<span class="token punctuation">:</span> <span class="token string">&quot;{{ $labels.instance }} of job {{ $labels.job }} has been down for more than 5 minutes.&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后就可以运行docker-compose命令去生成容器，示例如下 <img src="`+m+'" alt="image.png" loading="lazy"></p>',10),H=n("img",{src:k,alt:"image.png",loading:"lazy"},null,-1),L={href:"http://192.168.81.139:9090/targets?search=",target:"_blank",rel:"noopener noreferrer"},J=n("img",{src:b,alt:"image.png",loading:"lazy"},null,-1),K=n("img",{src:g,alt:"image.png",loading:"lazy"},null,-1),W=n("img",{src:v,alt:"image.png",loading:"lazy"},null,-1),Q=t(`<h3 id="安装granfana" tabindex="-1"><a class="header-anchor" href="#安装granfana"><span>安装Granfana</span></a></h3><p>这里直接使用docker来安装grafana</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>sudo docker run <span class="token operator">--</span>name grafana <span class="token operator">-</span>d <span class="token operator">-</span>p <span class="token number">8000</span><span class="token punctuation">:</span><span class="token number">3000</span> grafana<span class="token operator">/</span>grafana
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后访问地址 ip+ 8000，默认账号密码为admin/admin <img src="`+h+'" alt="image.png" loading="lazy"> 添加数据源 <img src="'+f+'" alt="image.png" loading="lazy"><img src="'+_+'" alt="image.png" loading="lazy"> 填写prometheus地址 <img src="'+y+'" alt="image.png" loading="lazy"></p><h2 id="导入仪表盘" tabindex="-1"><a class="header-anchor" href="#导入仪表盘"><span>导入仪表盘</span></a></h2>',5),U=n("img",{src:x,alt:"image.png",loading:"lazy"},null,-1),X=n("img",{src:z,alt:"image.png",loading:"lazy"},null,-1),Y={href:"https://github.com/dotnet/aspire/tree/main/src/Grafana",target:"_blank",rel:"noopener noreferrer"},nn=n("img",{src:w,alt:"image.png",loading:"lazy"},null,-1),sn=n("img",{src:N,alt:"image.png",loading:"lazy"},null,-1),an=n("img",{src:P,alt:"image.png",loading:"lazy"},null,-1),en=t('<p><img src="'+T+'" alt="image.png" loading="lazy"> 导入aspnetcore-endpoint.json文件 <img src="'+A+'" alt="image.png" loading="lazy"> 这个时候我们就看到了好看的仪表盘 <img src="'+q+'" alt="image.png" loading="lazy"><img src="'+C+'" alt="image.png" loading="lazy"> 当我点击接口让其报错，那么就显示到界面上 <img src="'+G+'" alt="image.png" loading="lazy"> 如果需要监控其他内容，也可以模仿着进行修改。</p>',1);function tn(on,pn){const a=p("ExternalLinkIcon");return r(),c("div",null,[S,n("p",null,[s("注意：该部分介绍摘抄自："),n("a",E,[s("https://www.aiwanyun.cn/archives/174"),e(a)])]),j,n("p",null,[s("基于我的一个示例项目进行改造，项目地址："),n("a",Z,[s("https://gitee.com/AZRNG/my-example"),e(a)]),s(" ，为了演示一个基本的监控效果，监控的数据也只是请求，具体生产环境需要监控什么业务，这个看具体情况了，这里需要在原来的项目基础上需要安装以下nuget包")]),M,n("p",null,[s("部署成功截图如下 "),I,s(" 访问地址 "),n("a",R,[s("http://192.168.82.163:8001/metrics"),e(a)]),V]),B,n("p",null,[s("准备一个服务器，提前安装好了docker以及docker-compose程序，版本示例如下 "),D,s(" 关于Prometheus和Grafana可以通过docker进行安装到服务器中，可以参考仓库："),n("a",$,[s("https://gitee.com/AZRNG/common-docker-yaml"),e(a)])]),F,n("p",null,[s("然后访问Ip地址加端口访问页面，比如http://192.168.81.139:9090/ "),H,s(" 打开这个界面就说明安装好了，这个时候我们看下 "),n("a",L,[s("http://192.168.81.139:9090/targets?search="),e(a)]),s(" 页面 "),J,s(" 这个node报错是因为这个地址是无效了，那么修改为真是.NetCore的服务地址，修改配置文件然后重新启动 "),K,s(" 重启后界面显示如下 "),W]),Q,n("p",null,[s("创建文件夹用来存放我们本地的要导入的文件 "),U,X,s(" 想要在Grafana中进行数据的展示，需要导入dashborards模板，本文的模板我是从微软仓库找到的，地址为："),n("a",Y,[s("https://github.com/dotnet/aspire/tree/main/src/Grafana"),e(a)]),nn,s(" 分别点进去下载这两个仪表盘对应的的json文件即可，也可以去我common-docker-yaml仓库中下载 "),sn,s(" 然后导入json文件 "),an,s(" 导入aspnetcore.json文件，并选择我们的netcore文件夹以及选择刚刚我们创建的Prometheus数据源")]),en])}const ln=o(O,[["render",tn],["__file","openTelemetryStartedCombat.html.vue"]]),un=JSON.parse('{"path":"/middleware/smallService/distributedObservability/distributedMonitoring/openTelemetryStartedCombat.html","title":"OpenTelemetry快速开始","lang":"zh-CN","frontmatter":{"title":"OpenTelemetry快速开始","lang":"zh-CN","date":"2023-09-29T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["middleware"],"tag":["OpenTelemetry"],"description":"工具介绍 注意：该部分介绍摘抄自：https://www.aiwanyun.cn/archives/174 Prometheus、Grafana、Node Exporter 和Alertmanager是一组用于监控和可视化系统性能的开源工具。它们通常一起使用，形成一个强大的完整的监控和告警系统。 一般来说，这四个工具一起协作，形成了一个完整的监控和告警...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/middleware/smallService/distributedObservability/distributedMonitoring/openTelemetryStartedCombat.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"OpenTelemetry快速开始"}],["meta",{"property":"og:description","content":"工具介绍 注意：该部分介绍摘抄自：https://www.aiwanyun.cn/archives/174 Prometheus、Grafana、Node Exporter 和Alertmanager是一组用于监控和可视化系统性能的开源工具。它们通常一起使用，形成一个强大的完整的监控和告警系统。 一般来说，这四个工具一起协作，形成了一个完整的监控和告警..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/soft/a5ef7ca6bc7842419734f7f403946d62.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-02T08:43:04.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"OpenTelemetry"}],["meta",{"property":"article:published_time","content":"2023-09-29T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-02T08:43:04.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"OpenTelemetry快速开始\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/soft/a5ef7ca6bc7842419734f7f403946d62.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/b75760d1815c4512adbf2ff69dc18265.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/e1a777ed966749399b6075b8497b464b.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/18e098d9e5704f949b2c17d3cb65d553.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/d2d7bb6e27e14bd2803e904e59a33ed1.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/b2d7ba1bf55d43a6b9ac1fb9f4f94f02.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/a38c174edc274fef89b79cbd412b1d78.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/a7bbf3581f14433497885edf1a7c05fb.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/88a0224156124d62b0eff11ad046188a.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/1408d9b04f8d4e0d81d3013e6533ec2e.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/f6e3c303aa0e40cdbe705e588ebf9ee7.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/1bef194077a448a38888fdd1ba4c6d46.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/01c8f09ff60e42afa1c0107bf3136e18.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/9f7b37829273485781ba11ed142f1401.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/4e957a61a6b344cdb6b661a3321c198f.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/5d181ac981d34ddca81c5b908beb18b6.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/2a1ab5af57174058a234806d03399f5c.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/a965f6e35c7a417fb45d584fcedb1ff2.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/43bbbc5490c342d6842b9ef485c6190e.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/fa0f036049a1452492ae4d30663d8457.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/7f832b36c926435d9c64bcbe3eef875e.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/e4f53d2010424875a277b8a96045923c.png\\",\\"https://azrng.gitee.io/kbms/kbms/soft/edb085bca1b04448a2ce3959c1d3b59c.png\\"],\\"datePublished\\":\\"2023-09-29T00:00:00.000Z\\",\\"dateModified\\":\\"2024-03-02T08:43:04.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"工具介绍","slug":"工具介绍","link":"#工具介绍","children":[{"level":3,"title":"Prometheus","slug":"prometheus","link":"#prometheus","children":[]},{"level":3,"title":"Grafana","slug":"grafana","link":"#grafana","children":[]},{"level":3,"title":"Alertmanager","slug":"alertmanager","link":"#alertmanager","children":[]}]},{"level":2,"title":".NetCore项目准备","slug":"netcore项目准备","link":"#netcore项目准备","children":[]},{"level":2,"title":"安装监控和可视化程序","slug":"安装监控和可视化程序","link":"#安装监控和可视化程序","children":[{"level":3,"title":"安装Prometheus","slug":"安装prometheus","link":"#安装prometheus","children":[]},{"level":3,"title":"安装Granfana","slug":"安装granfana","link":"#安装granfana","children":[]}]},{"level":2,"title":"导入仪表盘","slug":"导入仪表盘","link":"#导入仪表盘","children":[]}],"git":{"createdTime":1709368984000,"updatedTime":1709368984000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":5.2,"words":1561},"filePathRelative":"middleware/smallService/distributedObservability/distributedMonitoring/openTelemetryStartedCombat.md","localizedDate":"2023年9月29日","excerpt":"<h2>工具介绍</h2>\\n<p>注意：该部分介绍摘抄自：<a href=\\"https://www.aiwanyun.cn/archives/174\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://www.aiwanyun.cn/archives/174</a></p>\\n<p>Prometheus、Grafana、Node Exporter 和Alertmanager是一组用于监控和可视化系统性能的开源工具。它们通常一起使用，形成一个强大的完整的监控和告警系统。 一般来说，这四个工具一起协作，形成了一个完整的监控和告警系统。Node Exporter用于收集主机级别的指标(本文暂未使用)，Prometheus存储和查询这些指标，Grafana提供可视化界面，而Alertmanager则负责管理和发送告警。整个系统的目标是帮助管理员和开发人员实时了解系统的状态、性能和健康状况，并在必要时采取措施。</p>","autoDesc":true}');export{ln as comp,un as data};

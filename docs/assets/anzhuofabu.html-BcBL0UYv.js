import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as p,c as t,a,d as s,e as r,b as l}from"./app-Bw62I61B.js";const c="/kbms/common/1666449750699-d987ea22-6a0f-4d88-a494-64aaec095c89.png",i="/kbms/common/1666449805533-abf78679-6cd0-4b98-8a21-53cdb7aef38c.png",d="/kbms/common/1666451120428-276a9ea0-f401-4546-bdb4-feceb836eef2.png",k={},u=l(`<h2 id="目的" tabindex="-1"><a class="header-anchor" href="#目的"><span>目的</span></a></h2><p>将MAUI程序生成apk包来玩。</p><blockquote><p>切记项目目录不要带中文</p></blockquote><h2 id="程序包设置" tabindex="-1"><a class="header-anchor" href="#程序包设置"><span>程序包设置</span></a></h2><p>每个应用都应该指定唯一的包标识符和版本，配置在项目的.csproj文件中</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 显示名 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ApplicationTitle<span class="token operator">&gt;</span>MauiAppBlazor<span class="token operator">&lt;</span><span class="token operator">/</span>ApplicationTitle<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> App 标识 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ApplicationId<span class="token operator">&gt;</span>com<span class="token punctuation">.</span>companyname<span class="token punctuation">.</span>mauiappblazor<span class="token operator">&lt;</span><span class="token operator">/</span>ApplicationId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ApplicationIdGuid<span class="token operator">&gt;</span>48CF021D<span class="token operator">-</span>51ED<span class="token operator">-</span>47B9<span class="token operator">-</span>B8BC<span class="token operator">-</span>E6005BE37A8A<span class="token operator">&lt;</span><span class="token operator">/</span>ApplicationIdGuid<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 版本 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ApplicationDisplayVersion<span class="token operator">&gt;</span><span class="token number">1.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>ApplicationDisplayVersion<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ApplicationVersion<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>ApplicationVersion<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建密钥存储文件" tabindex="-1"><a class="header-anchor" href="#创建密钥存储文件"><span>创建密钥存储文件</span></a></h2><p>使用密钥存储文件对包进行签名， Java/Android SDK 包含生成密钥存储所需的工具。 生成密钥存储文件后，将它添加到项目中，并将项目文件配置为引用它。提前安装 Java SDK ，以便你可以运行 <em>keytool</em> 工具。 执行下面的步骤创建密钥存储文件 1.打开终端程序并导航到项目文件夹 <img src="`+c+`" alt="image.png" loading="lazy"> 2.运行keytool工具</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>keytool <span class="token operator">-</span>genkey <span class="token operator">-</span>v <span class="token operator">-</span>keystore myapp<span class="token punctuation">.</span>keystore <span class="token operator">-</span><span class="token keyword">alias</span> key <span class="token operator">-</span>keyalg RSA <span class="token operator">-</span>keysize <span class="token number">2048</span> <span class="token operator">-</span>validity <span class="token number">10000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>按照提示输入密码等设置 <img src="`+i+`" alt="image.png" loading="lazy"> 该工具生成 一个 myapp.keystore 文件，该文件应与项目位于同一文件夹中。</p><h2 id="添加对密钥存储文件的引用" tabindex="-1"><a class="header-anchor" href="#添加对密钥存储文件的引用"><span>添加对密钥存储文件的引用</span></a></h2><p>修改项目的csproj文件做以下配置</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code><span class="token operator">&lt;</span><span class="token class-name">PropertyGroup</span> Condition<span class="token operator">=</span><span class="token string">&quot;$(TargetFramework.Contains(&#39;-android&#39;)) and &#39;$(Configuration)&#39; == &#39;Release&#39;&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>AndroidKeyStore<span class="token operator">&gt;</span>True<span class="token operator">&lt;</span><span class="token operator">/</span>AndroidKeyStore<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>设置为 True 对应用进行签名<span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>AndroidSigningKeyStore<span class="token operator">&gt;</span>myapp<span class="token punctuation">.</span>keystore<span class="token operator">&lt;</span><span class="token operator">/</span>AndroidSigningKeyStore<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>在上一部分中创建的密钥存储文件： myapp<span class="token punctuation">.</span>keystore<span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>AndroidSigningKeyAlias<span class="token operator">&gt;</span>key<span class="token operator">&lt;</span><span class="token operator">/</span>AndroidSigningKeyAlias<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>传递给 keytool 工具的参数值：键<span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>AndroidSigningKeyPass<span class="token operator">&gt;</span><span class="token number">123456</span><span class="token operator">&lt;</span><span class="token operator">/</span>AndroidSigningKeyPass<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>创建密钥存储文件时提供的密码<span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>AndroidSigningStorePass<span class="token operator">&gt;</span><span class="token number">123456</span><span class="token operator">&lt;</span><span class="token operator">/</span>AndroidSigningStorePass<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>创建密钥存储文件时提供的密码<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>PropertyGroup<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="发布" tabindex="-1"><a class="header-anchor" href="#发布"><span>发布</span></a></h2><p>使用.Net命令行来发布</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>dotnet publish <span class="token operator">-</span>f<span class="token punctuation">:</span>net7<span class="token punctuation">.</span><span class="token number">0</span><span class="token operator">-</span>android <span class="token operator">-</span>c<span class="token punctuation">:</span>Release <span class="token operator">/</span>p<span class="token punctuation">:</span>AndroidSigningKeyPass<span class="token operator">=</span><span class="token number">123456</span> <span class="token operator">/</span>p<span class="token punctuation">:</span>AndroidSigningStorePass<span class="token operator">=</span><span class="token number">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>参数介绍 -f ：目标框架，例如net7.0-android -c：生成配置，例如Release /p:AndroidSigningKeyPass：上面AndroidSigningKeyPass项目设置的值，也就是创建密钥文件时候的密码 /p：AndroidSigningStorePass ：上面AndroidSigningStorePass项目设置的值，也就是创建密钥文件时候的密码</p></blockquote><p>发布之后会生成到相对路径为：\\bin\\Release\\net7.0-android\\publish <img src="`+d+`" alt="image.png" loading="lazy"> 包含aab文件和apk文件，有两个 aab 文件，一个未签名，另一个已签名。 签名的变体在文件名中具有 -signed 。</p><h2 id="错误处理" tabindex="-1"><a class="header-anchor" href="#错误处理"><span>错误处理</span></a></h2><p>如果打包的时候遇到“error XA5300: 找不到 Android SDK 目录。请检查 Visual Studio 中的 Android SDK 管理器是否显示有效的安装。若要使用命令行 生成的自定义 SDK 路径，请将 &quot;AndroidSdkDirectory&quot; MSBuild 属性设置为自定义路径。 ”那么可以修改上面的发布命令为</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>dotnet publish <span class="token operator">-</span>f<span class="token punctuation">:</span>net7<span class="token punctuation">.</span><span class="token number">0</span><span class="token operator">-</span>android <span class="token operator">-</span>c<span class="token punctuation">:</span>Release <span class="token operator">/</span>p<span class="token punctuation">:</span>AndroidSigningKeyPass<span class="token operator">=</span><span class="token number">123456</span> <span class="token operator">/</span>p<span class="token punctuation">:</span>AndroidSigningStorePass<span class="token operator">=</span><span class="token number">123456</span> <span class="token operator">/</span>p<span class="token punctuation">:</span>AndroidSdkDirectory<span class="token operator">=</span>D<span class="token punctuation">:</span>\\Android\\android<span class="token operator">-</span>sdk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这个安卓sdk的地址只能你自己在你电脑上找了。</p><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2>`,23),g={href:"https://learn.microsoft.com/zh-cn/dotnet/maui/android/deployment/publish-cli",target:"_blank",rel:"noopener noreferrer"};function m(h,b){const n=o("ExternalLinkIcon");return p(),t("div",null,[u,a("p",null,[s("官网资料："),a("a",g,[s("https://learn.microsoft.com/zh-cn/dotnet/maui/android/deployment/publish-cli"),r(n)])])])}const A=e(k,[["render",m],["__file","anzhuofabu.html.vue"]]),f=JSON.parse('{"path":"/dotnet/maui/fabu/anzhuofabu.html","title":"安卓发布","lang":"zh-CN","frontmatter":{"title":"安卓发布","lang":"zh-CN","date":"2022-10-22T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dotNET"],"tag":["无"],"filename":"anzhuofabu","slug":"yrpugg","docsId":"97589395","description":"目的 将MAUI程序生成apk包来玩。 切记项目目录不要带中文 程序包设置 每个应用都应该指定唯一的包标识符和版本，配置在项目的.csproj文件中 创建密钥存储文件 使用密钥存储文件对包进行签名， Java/Android SDK 包含生成密钥存储所需的工具。 生成密钥存储文件后，将它添加到项目中，并将项目文件配置为引用它。提前安装 Java SDK...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dotnet/maui/fabu/anzhuofabu.html"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"安卓发布"}],["meta",{"property":"og:description","content":"目的 将MAUI程序生成apk包来玩。 切记项目目录不要带中文 程序包设置 每个应用都应该指定唯一的包标识符和版本，配置在项目的.csproj文件中 创建密钥存储文件 使用密钥存储文件对包进行签名， Java/Android SDK 包含生成密钥存储所需的工具。 生成密钥存储文件后，将它添加到项目中，并将项目文件配置为引用它。提前安装 Java SDK..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1666449750699-d987ea22-6a0f-4d88-a494-64aaec095c89.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-10-22T08:11:43.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2022-10-22T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-10-22T08:11:43.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"安卓发布\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1666449750699-d987ea22-6a0f-4d88-a494-64aaec095c89.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1666449805533-abf78679-6cd0-4b98-8a21-53cdb7aef38c.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1666451120428-276a9ea0-f401-4546-bdb4-feceb836eef2.png\\"],\\"datePublished\\":\\"2022-10-22T00:00:00.000Z\\",\\"dateModified\\":\\"2023-10-22T08:11:43.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"目的","slug":"目的","link":"#目的","children":[]},{"level":2,"title":"程序包设置","slug":"程序包设置","link":"#程序包设置","children":[]},{"level":2,"title":"创建密钥存储文件","slug":"创建密钥存储文件","link":"#创建密钥存储文件","children":[]},{"level":2,"title":"添加对密钥存储文件的引用","slug":"添加对密钥存储文件的引用","link":"#添加对密钥存储文件的引用","children":[]},{"level":2,"title":"发布","slug":"发布","link":"#发布","children":[]},{"level":2,"title":"错误处理","slug":"错误处理","link":"#错误处理","children":[]},{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"git":{"createdTime":1697962303000,"updatedTime":1697962303000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":2.38,"words":714},"filePathRelative":"dotnet/maui/fabu/anzhuofabu.md","localizedDate":"2022年10月22日","excerpt":"<h2>目的</h2>\\n<p>将MAUI程序生成apk包来玩。</p>\\n<blockquote>\\n<p>切记项目目录不要带中文</p>\\n</blockquote>\\n<h2>程序包设置</h2>\\n<p>每个应用都应该指定唯一的包标识符和版本，配置在项目的.csproj文件中</p>\\n<div class=\\"language-csharp\\" data-ext=\\"cs\\" data-title=\\"cs\\"><pre class=\\"language-csharp\\"><code><span class=\\"token operator\\">&lt;</span><span class=\\"token operator\\">!</span><span class=\\"token operator\\">--</span> 显示名 <span class=\\"token operator\\">--</span><span class=\\"token operator\\">&gt;</span>\\n<span class=\\"token operator\\">&lt;</span>ApplicationTitle<span class=\\"token operator\\">&gt;</span>MauiAppBlazor<span class=\\"token operator\\">&lt;</span><span class=\\"token operator\\">/</span>ApplicationTitle<span class=\\"token operator\\">&gt;</span>\\n\\n<span class=\\"token operator\\">&lt;</span><span class=\\"token operator\\">!</span><span class=\\"token operator\\">--</span> App 标识 <span class=\\"token operator\\">--</span><span class=\\"token operator\\">&gt;</span>\\n<span class=\\"token operator\\">&lt;</span>ApplicationId<span class=\\"token operator\\">&gt;</span>com<span class=\\"token punctuation\\">.</span>companyname<span class=\\"token punctuation\\">.</span>mauiappblazor<span class=\\"token operator\\">&lt;</span><span class=\\"token operator\\">/</span>ApplicationId<span class=\\"token operator\\">&gt;</span>\\n<span class=\\"token operator\\">&lt;</span>ApplicationIdGuid<span class=\\"token operator\\">&gt;</span>48CF021D<span class=\\"token operator\\">-</span>51ED<span class=\\"token operator\\">-</span>47B9<span class=\\"token operator\\">-</span>B8BC<span class=\\"token operator\\">-</span>E6005BE37A8A<span class=\\"token operator\\">&lt;</span><span class=\\"token operator\\">/</span>ApplicationIdGuid<span class=\\"token operator\\">&gt;</span>\\n\\n<span class=\\"token operator\\">&lt;</span><span class=\\"token operator\\">!</span><span class=\\"token operator\\">--</span> 版本 <span class=\\"token operator\\">--</span><span class=\\"token operator\\">&gt;</span>\\n<span class=\\"token operator\\">&lt;</span>ApplicationDisplayVersion<span class=\\"token operator\\">&gt;</span><span class=\\"token number\\">1.0</span><span class=\\"token operator\\">&lt;</span><span class=\\"token operator\\">/</span>ApplicationDisplayVersion<span class=\\"token operator\\">&gt;</span>\\n<span class=\\"token operator\\">&lt;</span>ApplicationVersion<span class=\\"token operator\\">&gt;</span><span class=\\"token number\\">1</span><span class=\\"token operator\\">&lt;</span><span class=\\"token operator\\">/</span>ApplicationVersion<span class=\\"token operator\\">&gt;</span>\\n</code></pre></div>","autoDesc":true}');export{A as comp,f as data};

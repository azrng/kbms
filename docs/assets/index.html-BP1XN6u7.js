import{_ as o,a as p}from"./1662964862458-55292112-dc41-4232-96cb-361d761de2f1-_T0vxZKs.js";import{_ as c}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as l,c as r,a as n,d as a,e,b as t}from"./app-Bw62I61B.js";const u="/kbms/common/1662965030882-327a67e5-f6cb-492e-a62a-7e7430ddf13b.png",d="/kbms/common/1662965868627-6edb9591-e487-40e2-a526-bdf87583fea6.png",m="/kbms/common/1662969378474-f911182d-c2eb-4481-a9b8-1af708062845.png",g={},b=t('<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>通过github的Action可以实现在提交代码的时候，自动将程序部署到指定的服务器上(公网服务器)。</p><h2 id="服务器配置" tabindex="-1"><a class="header-anchor" href="#服务器配置"><span>服务器配置</span></a></h2><p>在指定的仓库中，选择Settings=&gt;Secrets=&gt;Actions <img src="'+o+'" alt="image.png" loading="lazy"> 点击右上的新建就可以创建想要保存的隐私配置信息 <img src="'+p+'" alt="image.png" loading="lazy"> 这里我保存了一下服务器的地址、账号、密码信息 <img src="'+u+'" alt="image.png" loading="lazy"></p><h2 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h2>',5),k={href:"https://www.yuque.com/docs/share/e1b98cea-cd77-4dcb-8f5b-a0a755b8e1bd?view=doc_embed",target:"_blank",rel:"noopener noreferrer"},h=n("h2",{id:"部署脚本选择",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#部署脚本选择"},[n("span",null,"部署脚本选择")])],-1),v=n("p",null,[a("在仓库点击Action选项卡可以工作流配置，这里有推荐写法。 "),n("img",{src:d,alt:"image.png",loading:"lazy"}),a(" 也可以自己编写自定义的执行脚本。")],-1),_={href:"https://docs.github.com/cn/pages/getting-started-with-github-pages/creating-a-github-pages-site",target:"_blank",rel:"noopener noreferrer"},f=t(`<h3 id="发布并推送到远程服务器" tabindex="-1"><a class="header-anchor" href="#发布并推送到远程服务器"><span>发布并推送到远程服务器</span></a></h3><p>将打包后的程序发布到远程服务器</p><div class="language-csharp line-numbers-mode" data-ext="cs" data-title="cs"><pre class="language-csharp"><code>name<span class="token punctuation">:</span> ASP<span class="token punctuation">.</span>NET Core <span class="token number">6.0</span> Example build <span class="token keyword">and</span> <span class="token class-name">deploy</span>
  
<span class="token keyword">on</span><span class="token punctuation">:</span>
  push<span class="token punctuation">:</span>
    branches<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;main&quot;</span> <span class="token punctuation">]</span>
  pull_request<span class="token punctuation">:</span>
    branches<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;main&quot;</span> <span class="token punctuation">]</span>

jobs<span class="token punctuation">:</span>

  build<span class="token punctuation">:</span>
    runs<span class="token operator">-</span><span class="token keyword">on</span><span class="token punctuation">:</span> ubuntu<span class="token operator">-</span><span class="token class-name">latest</span>

    steps<span class="token punctuation">:</span>
    <span class="token operator">-</span> uses<span class="token punctuation">:</span> actions<span class="token operator">/</span>checkout@v3
    <span class="token operator">-</span> name<span class="token punctuation">:</span> <span class="token class-name">Setup <span class="token punctuation">.</span>NET</span>
      uses<span class="token punctuation">:</span> actions<span class="token operator">/</span>setup<span class="token operator">-</span>dotnet<span class="token class-name">@v2</span>
      with<span class="token punctuation">:</span>
        dotnet<span class="token operator">-</span>version<span class="token punctuation">:</span> <span class="token number">6.0</span><span class="token punctuation">.</span>x
        
    <span class="token operator">-</span> name<span class="token punctuation">:</span> Restore <span class="token class-name">dependencies</span>
      run<span class="token punctuation">:</span> dotnet restore
      
    <span class="token operator">-</span> name<span class="token punctuation">:</span> Build <span class="token class-name">package</span>
      run<span class="token punctuation">:</span> dotnet publish <span class="token punctuation">.</span><span class="token operator">/</span>NetByDocker <span class="token operator">-</span>c Release <span class="token operator">-</span>r linux<span class="token operator">-</span>x64 <span class="token operator">--</span>self<span class="token operator">-</span>contained <span class="token boolean">false</span> <span class="token operator">-</span>o deploy
      
    <span class="token operator">-</span> name<span class="token punctuation">:</span> Upload <span class="token class-name">package</span>
      uses<span class="token punctuation">:</span> garygrossgarten<span class="token operator">/</span>github<span class="token operator">-</span>action<span class="token operator">-</span>scp@v0<span class="token punctuation">.</span><span class="token number">7.3</span>
      with<span class="token punctuation">:</span>
        host<span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets<span class="token punctuation">.</span>REMOTE_HOST <span class="token punctuation">}</span><span class="token punctuation">}</span>
        username<span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets<span class="token punctuation">.</span>REMOTE_USER <span class="token punctuation">}</span><span class="token punctuation">}</span>
        password<span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets<span class="token punctuation">.</span>REMOTE_PWD <span class="token punctuation">}</span><span class="token punctuation">}</span>
        port<span class="token punctuation">:</span> <span class="token number">22</span>
        local<span class="token punctuation">:</span> <span class="token operator">/</span>home<span class="token operator">/</span>runner<span class="token operator">/</span>work<span class="token operator">/</span>my<span class="token operator">-</span>example<span class="token operator">/</span>my<span class="token operator">-</span>example<span class="token operator">/</span>deploy<span class="token operator">/</span>
        remote<span class="token punctuation">:</span> <span class="token string">&quot;/home/project/example/&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>local：本地地址，可以去Build package最后结尾查看。 remote：远程存放的地址</p>`,4),y={href:"https://github.com/garygrossgarten/github-action-scp",target:"_blank",rel:"noopener noreferrer"},x=n("p",null,"容易出现的问题：",-1),z=n("ul",null,[n("li",null,"该工作流里面包含远程登录会被服务器识别为异常登录(凭据窃取)"),n("li",null,"那个本地地址容易写错，最后发现直接去那个Build步骤下查看")],-1),T=n("p",null,[a("反正最终还好是部署成功了 "),n("img",{src:m,alt:"image.png",loading:"lazy"})],-1),w=n("h2",{id:"资料",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#资料"},[n("span",null,"资料")])],-1),A={href:"https://docs.github.com/cn/actions/quickstart",target:"_blank",rel:"noopener noreferrer"},S={href:"https://blog.questionlearn.cn/archives/github-cicd",target:"_blank",rel:"noopener noreferrer"};function q(E,N){const s=i("ExternalLinkIcon");return l(),r("div",null,[b,n("p",null,[n("a",k,[a("Ubuntu部署.Net以及配置守护进程"),e(s)])]),h,v,n("p",null,[a("脚本文档："),n("a",_,[a("https://docs.github.com/cn/pages/getting-started-with-github-pages/creating-a-github-pages-site"),e(s)])]),f,n("p",null,[a("garygrossgarten配置的用法可以查看："),n("a",y,[a("https://github.com/garygrossgarten/github-action-scp"),e(s)])]),x,z,T,w,n("p",null,[a("GitHub docs："),n("a",A,[a("https://docs.github.com/cn/actions/quickstart"),e(s)]),n("a",S,[a("https://blog.questionlearn.cn/archives/github-cicd"),e(s)]),a(" | Github CICD自动化部署")])])}const O=c(g,[["render",q],["__file","index.html.vue"]]),Z=JSON.parse('{"path":"/cloud/ciAndCd/github/","title":"说明","lang":"zh-CN","frontmatter":{"title":"说明","lang":"zh-CN","date":"2023-09-08T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["cloud"],"tag":["无"],"filename":"readme","slug":"quygh0","docsId":"92758257","description":"概述 通过github的Action可以实现在提交代码的时候，自动将程序部署到指定的服务器上(公网服务器)。 服务器配置 在指定的仓库中，选择Settings=>Secrets=>Actions image.png 点击右上的新建就可以创建想要保存的隐私配置信息 image.png 这里我保存了一下服务器的地址、账号、密码信息 image.png 部署...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/cloud/ciAndCd/github/"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"说明"}],["meta",{"property":"og:description","content":"概述 通过github的Action可以实现在提交代码的时候，自动将程序部署到指定的服务器上(公网服务器)。 服务器配置 在指定的仓库中，选择Settings=>Secrets=>Actions image.png 点击右上的新建就可以创建想要保存的隐私配置信息 image.png 这里我保存了一下服务器的地址、账号、密码信息 image.png 部署..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://azrng.gitee.io/kbms/kbms/common/1662964788789-be6dab44-c8d3-47e5-92be-8b39ffad23f6.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-09-24T07:50:54.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"无"}],["meta",{"property":"article:published_time","content":"2023-09-08T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-09-24T07:50:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"说明\\",\\"image\\":[\\"https://azrng.gitee.io/kbms/kbms/common/1662964788789-be6dab44-c8d3-47e5-92be-8b39ffad23f6.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1662964862458-55292112-dc41-4232-96cb-361d761de2f1.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1662965030882-327a67e5-f6cb-492e-a62a-7e7430ddf13b.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1662965868627-6edb9591-e487-40e2-a526-bdf87583fea6.png\\",\\"https://azrng.gitee.io/kbms/kbms/common/1662969378474-f911182d-c2eb-4481-a9b8-1af708062845.png\\"],\\"datePublished\\":\\"2023-09-08T00:00:00.000Z\\",\\"dateModified\\":\\"2023-09-24T07:50:54.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"服务器配置","slug":"服务器配置","link":"#服务器配置","children":[]},{"level":2,"title":"部署","slug":"部署","link":"#部署","children":[]},{"level":2,"title":"部署脚本选择","slug":"部署脚本选择","link":"#部署脚本选择","children":[{"level":3,"title":"发布并推送到远程服务器","slug":"发布并推送到远程服务器","link":"#发布并推送到远程服务器","children":[]}]},{"level":2,"title":"资料","slug":"资料","link":"#资料","children":[]}],"git":{"createdTime":1695541854000,"updatedTime":1695541854000,"contributors":[{"name":"azrng","email":"itzhangyunpeng@163.com","commits":1}]},"readingTime":{"minutes":1.64,"words":491},"filePathRelative":"cloud/ciAndCd/github/readme.md","localizedDate":"2023年9月8日","excerpt":"<h2>概述</h2>\\n<p>通过github的Action可以实现在提交代码的时候，自动将程序部署到指定的服务器上(公网服务器)。</p>\\n<h2>服务器配置</h2>\\n<p>在指定的仓库中，选择Settings=&gt;Secrets=&gt;Actions\\n<img src=\\"/common/1662964788789-be6dab44-c8d3-47e5-92be-8b39ffad23f6.png\\" alt=\\"image.png\\" loading=\\"lazy\\">\\n点击右上的新建就可以创建想要保存的隐私配置信息\\n<img src=\\"/common/1662964862458-55292112-dc41-4232-96cb-361d761de2f1.png\\" alt=\\"image.png\\" loading=\\"lazy\\">\\n这里我保存了一下服务器的地址、账号、密码信息\\n<img src=\\"/common/1662965030882-327a67e5-f6cb-492e-a62a-7e7430ddf13b.png\\" alt=\\"image.png\\" loading=\\"lazy\\"></p>","autoDesc":true}');export{O as comp,Z as data};
